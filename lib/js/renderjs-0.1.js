(function(exports){exports.renderjs={};var MatrixStack=(function(){function a(b,c,d){'use asm';var k=new b.Float32Array(d);var l=b.Math.imul;var m=b.Math.fround;var n=b.Math.floor;var o=b.Math.sin;var p=b.Math.cos;var q=b.Math.tan;var r=b.Math.sqrt;function s(f2){f2=f2|0;f2=f2<<6;k[f2+0>>2]=m(1.0);k[f2+4>>2]=m(0.0);k[f2+8>>2]=m(0.0);k[f2+12>>2]=m(0.0);k[f2+16>>2]=m(0.0);k[f2+20>>2]=m(1.0);k[f2+24>>2]=m(0.0);k[f2+28>>2]=m(0.0);k[f2+32>>2]=m(0.0);k[f2+36>>2]=m(0.0);k[f2+40>>2]=m(1.0);k[f2+44>>2]=m(0.0);k[f2+48>>2]=m(0.0);k[f2+52>>2]=m(0.0);k[f2+56>>2]=m(0.0);k[f2+60>>2]=m(1.0);}function u(f2,w,x,y,z){f2=f2|0;w= +w;x= +x;y= +y;z= +z;var k2=0.0;var l2=0.0;f2=f2<<6;k2=1.0/q(w/2.0);l2=1.0/(y-z);k[f2+0>>2]=m(k2/x);k[f2+4>>2]=m(0.0);k[f2+8>>2]=m(0.0);k[f2+12>>2]=m(0.0);k[f2+16>>2]=m(0.0);k[f2+20>>2]=m(k2);k[f2+24>>2]=m(0.0);k[f2+28>>2]=m(0.0);k[f2+32>>2]=m(0.0);k[f2+36>>2]=m(0.0);k[f2+40>>2]=m((y+z)*l2);k[f2+44>>2]=m(-1.0);k[f2+48>>2]=m(0.0);k[f2+52>>2]=m(0.0);k[f2+56>>2]=m(((y*z)*l2)*2.0);k[f2+60>>2]=m(0.0);}function a1(d2,b2){d2=d2|0;b2=b2|0;var m2=m(0.0),n2=m(0.0),o2=m(0.0),p2=m(0.0),q2=m(0.0),r2=m(0.0),s2=m(0.0),t2=m(0.0),u2=m(0.0),v2=m(0.0),w2=m(0.0),x2=m(0.0),y2=m(0.0),z2=m(0.0),a3=m(0.0),b3=m(0.0);d2=d2<<6;b2=b2<<6;m2=m(m(m(m(k[b2+0>>2])*m(k[d2+0>>2]))+m(m(k[b2+4>>2])*m(k[d2+16>>2])))+m(m(m(k[b2+8>>2])*m(k[d2+32>>2]))+m(m(k[b2+12>>2])*m(k[d2+48>>2]))));n2=m(m(m(m(k[b2+0>>2])*m(k[d2+4>>2]))+m(m(k[b2+4>>2])*m(k[d2+20>>2])))+m(m(m(k[b2+8>>2])*m(k[d2+36>>2]))+m(m(k[b2+12>>2])*m(k[d2+52>>2]))));o2=m(m(m(m(k[b2+0>>2])*m(k[d2+8>>2]))+m(m(k[b2+4>>2])*m(k[d2+24>>2])))+m(m(m(k[b2+8>>2])*m(k[d2+40>>2]))+m(m(k[b2+12>>2])*m(k[d2+56>>2]))));p2=m(m(m(m(k[b2+0>>2])*m(k[d2+12>>2]))+m(m(k[b2+4>>2])*m(k[d2+28>>2])))+m(m(m(k[b2+8>>2])*m(k[d2+44>>2]))+m(m(k[b2+12>>2])*m(k[d2+60>>2]))));q2=m(m(m(m(k[b2+16>>2])*m(k[d2+0>>2]))+m(m(k[b2+20>>2])*m(k[d2+16>>2])))+m(m(m(k[b2+24>>2])*m(k[d2+32>>2]))+m(m(k[b2+28>>2])*m(k[d2+48>>2]))));r2=m(m(m(m(k[b2+16>>2])*m(k[d2+4>>2]))+m(m(k[b2+20>>2])*m(k[d2+20>>2])))+m(m(m(k[b2+24>>2])*m(k[d2+36>>2]))+m(m(k[b2+28>>2])*m(k[d2+52>>2]))));s2=m(m(m(m(k[b2+16>>2])*m(k[d2+8>>2]))+m(m(k[b2+20>>2])*m(k[d2+24>>2])))+m(m(m(k[b2+24>>2])*m(k[d2+40>>2]))+m(m(k[b2+28>>2])*m(k[d2+56>>2]))));t2=m(m(m(m(k[b2+16>>2])*m(k[d2+12>>2]))+m(m(k[b2+20>>2])*m(k[d2+28>>2])))+m(m(m(k[b2+24>>2])*m(k[d2+44>>2]))+m(m(k[b2+28>>2])*m(k[d2+60>>2]))));u2=m(m(m(m(k[b2+32>>2])*m(k[d2+0>>2]))+m(m(k[b2+36>>2])*m(k[d2+16>>2])))+m(m(m(k[b2+40>>2])*m(k[d2+32>>2]))+m(m(k[b2+44>>2])*m(k[d2+48>>2]))));v2=m(m(m(m(k[b2+32>>2])*m(k[d2+4>>2]))+m(m(k[b2+36>>2])*m(k[d2+20>>2])))+m(m(m(k[b2+40>>2])*m(k[d2+36>>2]))+m(m(k[b2+44>>2])*m(k[d2+52>>2]))));w2=m(m(m(m(k[b2+32>>2])*m(k[d2+8>>2]))+m(m(k[b2+36>>2])*m(k[d2+24>>2])))+m(m(m(k[b2+40>>2])*m(k[d2+40>>2]))+m(m(k[b2+44>>2])*m(k[d2+56>>2]))));x2=m(m(m(m(k[b2+32>>2])*m(k[d2+12>>2]))+m(m(k[b2+36>>2])*m(k[d2+28>>2])))+m(m(m(k[b2+40>>2])*m(k[d2+44>>2]))+m(m(k[b2+44>>2])*m(k[d2+60>>2]))));y2=m(m(m(m(k[b2+48>>2])*m(k[d2+0>>2]))+m(m(k[b2+52>>2])*m(k[d2+16>>2])))+m(m(m(k[b2+56>>2])*m(k[d2+32>>2]))+m(m(k[b2+60>>2])*m(k[d2+48>>2]))));z2=m(m(m(m(k[b2+48>>2])*m(k[d2+4>>2]))+m(m(k[b2+52>>2])*m(k[d2+20>>2])))+m(m(m(k[b2+56>>2])*m(k[d2+36>>2]))+m(m(k[b2+60>>2])*m(k[d2+52>>2]))));a3=m(m(m(m(k[b2+48>>2])*m(k[d2+8>>2]))+m(m(k[b2+52>>2])*m(k[d2+24>>2])))+m(m(m(k[b2+56>>2])*m(k[d2+40>>2]))+m(m(k[b2+60>>2])*m(k[d2+56>>2]))));b3=m(m(m(m(k[b2+48>>2])*m(k[d2+12>>2]))+m(m(k[b2+52>>2])*m(k[d2+28>>2])))+m(m(m(k[b2+56>>2])*m(k[d2+44>>2]))+m(m(k[b2+60>>2])*m(k[d2+60>>2]))));k[d2+0>>2]=m2;k[d2+4>>2]=n2;k[d2+8>>2]=o2;k[d2+12>>2]=p2;k[d2+16>>2]=q2;k[d2+20>>2]=r2;k[d2+24>>2]=s2;k[d2+28>>2]=t2;k[d2+32>>2]=u2;k[d2+36>>2]=v2;k[d2+40>>2]=w2;k[d2+44>>2]=x2;k[d2+48>>2]=y2;k[d2+52>>2]=z2;k[d2+56>>2]=a3;k[d2+60>>2]=b3;}function d1(d2,b2){d2=d2|0;b2=b2|0;var c3=m(0.0),d3=m(0.0),e3=m(0.0),f3=m(0.0),g3=m(0.0),h3=m(0.0),i3=m(0.0),j3=m(0.0),k3=m(0.0),l3=m(0.0),m3=m(0.0),n3=m(0.0),o3=m(0.0),p3=m(0.0),q3=m(0.0),r3=m(0.0);d2=d2<<6;b2=b2<<6;c3=m(m(m(m(k[d2+0>>2])*m(k[b2+0>>2]))+m(m(k[d2+4>>2])*m(k[b2+16>>2])))+m(m(m(k[d2+8>>2])*m(k[b2+32>>2]))+m(m(k[d2+12>>2])*m(k[b2+48>>2]))));d3=m(m(m(m(k[d2+0>>2])*m(k[b2+4>>2]))+m(m(k[d2+4>>2])*m(k[b2+20>>2])))+m(m(m(k[d2+8>>2])*m(k[b2+36>>2]))+m(m(k[d2+12>>2])*m(k[b2+52>>2]))));e3=m(m(m(m(k[d2+0>>2])*m(k[b2+8>>2]))+m(m(k[d2+4>>2])*m(k[b2+24>>2])))+m(m(m(k[d2+8>>2])*m(k[b2+40>>2]))+m(m(k[d2+12>>2])*m(k[b2+56>>2]))));f3=m(m(m(m(k[d2+0>>2])*m(k[b2+12>>2]))+m(m(k[d2+4>>2])*m(k[b2+28>>2])))+m(m(m(k[d2+8>>2])*m(k[b2+44>>2]))+m(m(k[d2+12>>2])*m(k[b2+60>>2]))));g3=m(m(m(m(k[d2+16>>2])*m(k[b2+0>>2]))+m(m(k[d2+20>>2])*m(k[b2+16>>2])))+m(m(m(k[d2+24>>2])*m(k[b2+32>>2]))+m(m(k[d2+28>>2])*m(k[b2+48>>2]))));h3=m(m(m(m(k[d2+16>>2])*m(k[b2+4>>2]))+m(m(k[d2+20>>2])*m(k[b2+20>>2])))+m(m(m(k[d2+24>>2])*m(k[b2+36>>2]))+m(m(k[d2+28>>2])*m(k[b2+52>>2]))));i3=m(m(m(m(k[d2+16>>2])*m(k[b2+8>>2]))+m(m(k[d2+20>>2])*m(k[b2+24>>2])))+m(m(m(k[d2+24>>2])*m(k[b2+40>>2]))+m(m(k[d2+28>>2])*m(k[b2+56>>2]))));j3=m(m(m(m(k[d2+16>>2])*m(k[b2+12>>2]))+m(m(k[d2+20>>2])*m(k[b2+28>>2])))+m(m(m(k[d2+24>>2])*m(k[b2+44>>2]))+m(m(k[d2+28>>2])*m(k[b2+60>>2]))));k3=m(m(m(m(k[d2+32>>2])*m(k[b2+0>>2]))+m(m(k[d2+36>>2])*m(k[b2+16>>2])))+m(m(m(k[d2+40>>2])*m(k[b2+32>>2]))+m(m(k[d2+44>>2])*m(k[b2+48>>2]))));l3=m(m(m(m(k[d2+32>>2])*m(k[b2+4>>2]))+m(m(k[d2+36>>2])*m(k[b2+20>>2])))+m(m(m(k[d2+40>>2])*m(k[b2+36>>2]))+m(m(k[d2+44>>2])*m(k[b2+52>>2]))));m3=m(m(m(m(k[d2+32>>2])*m(k[b2+8>>2]))+m(m(k[d2+36>>2])*m(k[b2+24>>2])))+m(m(m(k[d2+40>>2])*m(k[b2+40>>2]))+m(m(k[d2+44>>2])*m(k[b2+56>>2]))));n3=m(m(m(m(k[d2+32>>2])*m(k[b2+12>>2]))+m(m(k[d2+36>>2])*m(k[b2+28>>2])))+m(m(m(k[d2+40>>2])*m(k[b2+44>>2]))+m(m(k[d2+44>>2])*m(k[b2+60>>2]))));o3=m(m(m(m(k[d2+48>>2])*m(k[b2+0>>2]))+m(m(k[d2+52>>2])*m(k[b2+16>>2])))+m(m(m(k[d2+56>>2])*m(k[b2+32>>2]))+m(m(k[d2+60>>2])*m(k[b2+48>>2]))));p3=m(m(m(m(k[d2+48>>2])*m(k[b2+4>>2]))+m(m(k[d2+52>>2])*m(k[b2+20>>2])))+m(m(m(k[d2+56>>2])*m(k[b2+36>>2]))+m(m(k[d2+60>>2])*m(k[b2+52>>2]))));q3=m(m(m(m(k[d2+48>>2])*m(k[b2+8>>2]))+m(m(k[d2+52>>2])*m(k[b2+24>>2])))+m(m(m(k[d2+56>>2])*m(k[b2+40>>2]))+m(m(k[d2+60>>2])*m(k[b2+56>>2]))));r3=m(m(m(m(k[d2+48>>2])*m(k[b2+12>>2]))+m(m(k[d2+52>>2])*m(k[b2+28>>2])))+m(m(m(k[d2+56>>2])*m(k[b2+44>>2]))+m(m(k[d2+60>>2])*m(k[b2+60>>2]))));k[d2+0>>2]=c3;k[d2+4>>2]=d3;k[d2+8>>2]=e3;k[d2+12>>2]=f3;k[d2+16>>2]=g3;k[d2+20>>2]=h3;k[d2+24>>2]=i3;k[d2+28>>2]=j3;k[d2+32>>2]=k3;k[d2+36>>2]=l3;k[d2+40>>2]=m3;k[d2+44>>2]=n3;k[d2+48>>2]=o3;k[d2+52>>2]=p3;k[d2+56>>2]=q3;k[d2+60>>2]=r3;}function g1(f2,g2,h2,i2){f2=f2|0;g2= +g2;h2= +h2;i2= +i2;var s3=0.0,t3=0.0,u3=0.0,v3=0.0;f2=f2<<6;s3=((g2*  +k[f2+0>>2]+h2*  +k[f2+16>>2])+i2*  +k[f2+32>>2])+  +k[f2+48>>2];t3=((g2*  +k[f2+4>>2]+h2*  +k[f2+20>>2])+i2*  +k[f2+36>>2])+  +k[f2+52>>2];u3=((g2*  +k[f2+8>>2]+h2*  +k[f2+24>>2])+i2*  +k[f2+40>>2])+  +k[f2+56>>2];v3=((g2*  +k[f2+12>>2]+h2*  +k[f2+28>>2])+i2*  +k[f2+44>>2])+  +k[f2+60>>2];k[f2+48>>2]=m(s3);k[f2+52>>2]=m(t3);k[f2+56>>2]=m(u3);k[f2+60>>2]=m(v3);}function l1(f2,g2,h2,i2){f2=f2|0;g2= +g2;h2= +h2;i2= +i2;f2=f2<<6;k[f2+0>>2]=m(g2*  +k[f2+0>>2]);k[f2+4>>2]=m(g2*  +k[f2+4>>2]);k[f2+8>>2]=m(g2*  +k[f2+8>>2]);k[f2+12>>2]=m(g2*  +k[f2+12>>2]);k[f2+16>>2]=m(h2*  +k[f2+16>>2]);k[f2+20>>2]=m(h2*  +k[f2+20>>2]);k[f2+24>>2]=m(h2*  +k[f2+24>>2]);k[f2+28>>2]=m(h2*  +k[f2+28>>2]);k[f2+32>>2]=m(i2*  +k[f2+32>>2]);k[f2+36>>2]=m(i2*  +k[f2+36>>2]);k[f2+40>>2]=m(i2*  +k[f2+40>>2]);k[f2+44>>2]=m(i2*  +k[f2+44>>2]);}function q1(d2,s1,g2,h2,i2){d2=d2|0;s1= +s1;g2= +g2;h2= +h2;i2= +i2;var w3=0.0,x3=0.0,y3=0.0,z3=0.0,a4=0.0,b4=0.0,c4=0.0;d2=d2<<6;x3=g2*g2;y3=h2*h2;z3=i2*i2;w3=r((x3+y3)+z3);a4=p(s1);b4=o(s1);c4=1.0-a4;g2=g2/w3;h2=h2/w3;i2=i2/w3;k[d2+0>>2]=m(a4+x3*c4);k[d2+4>>2]=m((g2*h2)*c4+i2*b4);k[d2+8>>2]=m((g2*i2)*c4-h2*b4);k[d2+12>>2]=m(0.0);k[d2+16>>2]=m((g2*h2)*c4-i2*b4);k[d2+20>>2]=m(a4+y3*c4);k[d2+24>>2]=m((h2*i2)*c4+g2*b4);k[d2+28>>2]=m(0.0);k[d2+32>>2]=m((g2*i2)*c4+h2*b4);k[d2+36>>2]=m((h2*i2)*c4-g2*b4);k[d2+40>>2]=m(a4+z3*c4);k[d2+44>>2]=m(0.0);k[d2+48>>2]=m(0.0);k[d2+52>>2]=m(0.0);k[d2+56>>2]=m(0.0);k[d2+60>>2]=m(1.0);}function w1(d2,b2){d2=d2|0;b2=b2|0;var d4=0;d2=d2<<6;b2=b2<<6;for(;(d4|0)<64;d4=(d4|0)+4|0)k[d2+d4>>2]=m(k[b2+d4>>2]);}function z1(d2,b2){d2=d2|0;b2=b2|0;var e4=0.0,f4=0.0;var g4=0.0,h4=0.0,i4=0.0,j4=0.0,k4=0.0,l4=0.0;var m4=0.0,n4=0.0,o4=0.0,p4=0.0,q4=0.0,r4=0.0;d2=d2<<6;b2=b2<<6;if( +k[b2+12>>2]==0.0)if( +k[b2+28>>2]==0.0)if( +k[b2+44>>2]==0.0){g4= +k[b2+20>>2]*  +k[b2+40>>2]- +k[b2+36>>2]*  +k[b2+24>>2];h4= +k[b2+36>>2]*  +k[b2+8>>2]- +k[b2+4>>2]*  +k[b2+40>>2];i4= +k[b2+4>>2]*  +k[b2+24>>2]- +k[b2+20>>2]*  +k[b2+8>>2];f4=(g4*  +k[b2+0>>2]+h4*  +k[b2+16>>2])+i4*  +k[b2+32>>2];if(-2.38e-7<=f4&&f4<=2.38e-7)return 0;e4= +1/f4;k[d2+0>>2]=m(g4*e4);k[d2+4>>2]=m(h4*e4);k[d2+8>>2]=m(i4*e4);k[d2+16>>2]=m(( +k[b2+32>>2]*  +k[b2+24>>2]- +k[b2+16>>2]*  +k[b2+40>>2])*e4);k[d2+20>>2]=m(( +k[b2+0>>2]*  +k[b2+40>>2]- +k[b2+32>>2]*  +k[b2+8>>2])*e4);k[d2+24>>2]=m(( +k[b2+16>>2]*  +k[b2+8>>2]- +k[b2+0>>2]*  +k[b2+24>>2])*e4);k[d2+32>>2]=m(( +k[b2+16>>2]*  +k[b2+36>>2]- +k[b2+32>>2]*  +k[b2+20>>2])*e4);k[d2+36>>2]=m(( +k[b2+32>>2]*  +k[b2+4>>2]- +k[b2+0>>2]*  +k[b2+36>>2])*e4);k[d2+40>>2]=m(( +k[b2+0>>2]*  +k[b2+20>>2]- +k[b2+16>>2]*  +k[b2+4>>2])*e4);k[d2+48>>2]=m(-(( +k[d2+0>>2]*  +k[b2+48>>2]+ +k[d2+16>>2]*  +k[b2+52>>2])+ +k[d2+32>>2]*  +k[b2+56>>2]));k[d2+52>>2]=m(-(( +k[d2+4>>2]*  +k[b2+48>>2]+ +k[d2+20>>2]*  +k[b2+52>>2])+ +k[d2+36>>2]*  +k[b2+56>>2]));k[d2+56>>2]=m(-(( +k[d2+8>>2]*  +k[b2+48>>2]+ +k[d2+24>>2]*  +k[b2+52>>2])+ +k[d2+40>>2]*  +k[b2+56>>2]));k[d2+12>>2]=m(0.0);k[d2+28>>2]=m(0.0);k[d2+44>>2]=m(0.0);k[d2+60>>2]=m(1.0);return 1;}g4= +k[b2+0>>2]*  +k[b2+20>>2]- +k[b2+4>>2]*  +k[b2+16>>2];h4= +k[b2+0>>2]*  +k[b2+36>>2]- +k[b2+4>>2]*  +k[b2+32>>2];i4= +k[b2+0>>2]*  +k[b2+52>>2]- +k[b2+4>>2]*  +k[b2+48>>2];j4= +k[b2+16>>2]*  +k[b2+36>>2]- +k[b2+20>>2]*  +k[b2+32>>2];k4= +k[b2+16>>2]*  +k[b2+52>>2]- +k[b2+20>>2]*  +k[b2+48>>2];l4= +k[b2+32>>2]*  +k[b2+52>>2]- +k[b2+36>>2]*  +k[b2+48>>2];r4= +k[b2+40>>2]*  +k[b2+60>>2]- +k[b2+44>>2]*  +k[b2+56>>2];q4= +k[b2+24>>2]*  +k[b2+60>>2]- +k[b2+28>>2]*  +k[b2+56>>2];p4= +k[b2+24>>2]*  +k[b2+44>>2]- +k[b2+28>>2]*  +k[b2+40>>2];o4= +k[b2+8>>2]*  +k[b2+60>>2]- +k[b2+12>>2]*  +k[b2+56>>2];n4= +k[b2+8>>2]*  +k[b2+44>>2]- +k[b2+12>>2]*  +k[b2+40>>2];m4= +k[b2+8>>2]*  +k[b2+28>>2]- +k[b2+12>>2]*  +k[b2+24>>2];f4=((((g4*r4-h4*q4)+i4*p4)+j4*o4)-k4*n4)+l4*m4;if(-2.38e-7<=f4&&f4<=2.38e-7)return 0;e4= +1/f4;k[d2+0>>2]=(( +k[b2+20>>2]*r4- +k[b2+36>>2]*q4)+ +k[b2+52>>2]*p4)*e4;k[d2+16>>2]=((- +k[b2+16>>2]*r4+ +k[b2+32>>2]*q4)- +k[b2+48>>2]*p4)*e4;k[d2+32>>2]=(( +k[b2+28>>2]*l4- +k[b2+44>>2]*k4)+ +k[b2+60>>2]*j4)*e4;k[d2+48>>2]=((- +k[b2+24>>2]*l4+ +k[b2+40>>2]*k4)- +k[b2+56>>2]*j4)*e4;k[d2+4>>2]=((- +k[b2+4>>2]*r4+ +k[b2+36>>2]*o4)- +k[b2+52>>2]*n4)*e4;k[d2+20>>2]=(( +k[b2+0>>2]*r4- +k[b2+32>>2]*o4)+ +k[b2+48>>2]*n4)*e4;k[d2+36>>2]=((- +k[b2+12>>2]*l4+ +k[b2+44>>2]*i4)- +k[b2+60>>2]*h4)*e4;k[d2+52>>2]=(( +k[b2+8>>2]*l4- +k[b2+40>>2]*i4)+ +k[b2+56>>2]*h4)*e4;k[d2+8>>2]=(( +k[b2+4>>2]*q4- +k[b2+20>>2]*o4)+ +k[b2+52>>2]*m4)*e4;k[d2+24>>2]=((- +k[b2+0>>2]*q4+ +k[b2+16>>2]*o4)- +k[b2+48>>2]*m4)*e4;k[d2+40>>2]=(( +k[b2+12>>2]*k4- +k[b2+28>>2]*i4)+ +k[b2+60>>2]*g4)*e4;k[d2+56>>2]=((- +k[b2+8>>2]*k4+ +k[b2+24>>2]*i4)- +k[b2+56>>2]*g4)*e4;k[d2+12>>2]=((- +k[b2+4>>2]*p4+ +k[b2+20>>2]*n4)- +k[b2+36>>2]*m4)*e4;k[d2+28>>2]=(( +k[b2+0>>2]*p4- +k[b2+16>>2]*n4)+ +k[b2+32>>2]*m4)*e4;k[d2+44>>2]=((- +k[b2+12>>2]*j4+ +k[b2+28>>2]*h4)- +k[b2+44>>2]*g4)*e4;k[d2+60>>2]=(( +k[b2+8>>2]*j4- +k[b2+24>>2]*h4)+ +k[b2+40>>2]*g4)*e4;return 1;}function c2(d2){d2=d2|0;var s4=m(0.0);d2=d2<<6;s4=m(k[d2+4>>2]);k[d2+4>>2]=m(k[d2+16>>2]);k[d2+16>>2]=m(s4);s4=m(k[d2+8>>2]);k[d2+8>>2]=m(k[d2+32>>2]);k[d2+32>>2]=m(s4);s4=m(k[d2+12>>2]);k[d2+12>>2]=m(k[d2+48>>2]);k[d2+48>>2]=m(s4);s4=m(k[d2+24>>2]);k[d2+24>>2]=m(k[d2+36>>2]);k[d2+36>>2]=m(s4);s4=m(k[d2+28>>2]);k[d2+28>>2]=m(k[d2+52>>2]);k[d2+52>>2]=m(s4);s4=m(k[d2+44>>2]);k[d2+44>>2]=m(k[d2+56>>2]);k[d2+56>>2]=m(s4);}function e2(f2,g2,h2,i2,j2){f2=f2|0;g2= +g2;h2= +h2;i2= +i2;j2= +j2;var t4=0.0,u4=0.0,v4=0.0,w4=0.0;f2=f2<<6;t4=((g2*  +k[f2+0>>2]+h2*  +k[f2+16>>2])+i2*  +k[f2+32>>2])+j2*  +k[f2+48>>2];u4=((g2*  +k[f2+4>>2]+h2*  +k[f2+20>>2])+i2*  +k[f2+36>>2])+j2*  +k[f2+52>>2];v4=((g2*  +k[f2+8>>2]+h2*  +k[f2+24>>2])+i2*  +k[f2+40>>2])+j2*  +k[f2+56>>2];w4=((g2*  +k[f2+12>>2]+h2*  +k[f2+28>>2])+i2*  +k[f2+44>>2])+j2*  +k[f2+60>>2];k[0>>2]=m(t4);k[4>>2]=m(u4);k[8>>2]=m(v4);k[12>>2]=m(w4);}return {identity:s,perspective:u,rotation:q1,translate:g1,scale:l1,lmul:d1,rmul:a1,copy:w1,invert:z1,transpose:c2,transform:e2};}function e(){var x4=65536;var y4=new ArrayBuffer(x4);var z4=new Float32Array(y4,0,x4>>4);var a5=new a(window,null,y4);var b5=1;a5.identity(1);this.identity=function(){a5.identity(b5);};this.perspective=function(fieldOfView,aspectRatio,near,far){a5.perspective(b5,((2*Math.PI)*fieldOfView)/360.0,aspectRatio,near,far);};this.translate=function(g,y,z){a5.translate(b5,g,y,z);};this.scale=function(g,y,z){a5.scale(b5,g,y,z);};this.rotate=function(deg,vector){a5.rotation(0,((2*Math.PI)*deg)/360.0,vector[0],vector[1],vector[2]);a5.rmul(b5,0);};this.push=function(){if(b5+1==x4>>6)throw {error:'too many matrices on stack'};a5.copy(b5+1,b5);b5++;};this.pop=function(){if(b5<2)throw {error:'nothing to pop'};b5--;};this.swap=function(){if(b5<2)throw {error:'nothing to swap'};a5.copy(0,b5);a5.copy(b5,b5-1);a5.copy(b5-1,0);};this.copyDown=function(){a5.copy(b5,b5-1);};this.mul=function(){if(b5<2)throw {error:'too few matrices on stack to multiply'};a5.rmul(b5-1,b5);b5--;};this.lmul=function(){if(b5<2)throw {error:'too few matrices on stack to multiply'};a5.lmul(b5-1,b5);b5--;};this.det=function(){var c5=b5<<4;var d5=z4[c5+5]*z4[c5+10]-z4[c5+9]*z4[c5+6];var e5=z4[c5+1]*z4[c5+10]-z4[c5+2]*z4[c5+9];var f5=z4[c5+1]*z4[c5+6]-z4[c5+5]*z4[c5+2];return (d5*z4[c5+0]-e5*z4[c5+4])+f5*z4[c5+8];};this.transform=function(g,y,z,w){if((y==undefined&&z==undefined)&&w==undefined){var g5=1;if(g.length==4)g5=g[3];a5.transform(b5,g[0],g[1],g[2],g5);if(g.length==4)return [z4[0],z4[1],z4[2],z4[3]];return [z4[0]/z4[3],z4[1]/z4[3],z4[2]/z4[3]];} else {if(w!=undefined){a5.transform(b5,g,y,z,w);return [z4[0],z4[1],z4[2],z4[3]];} else {a5.transform(b5,g,y,z,1);return [z4[0]/z4[3],z4[1]/z4[3],z4[2]/z4[3]];}}return [z4[0],z4[1],z4[2]];};this.invert=function(){if(!a5.invert(0,b5))return false;a5.copy(b5,0);return true;};this.transpose=function(){a5.transpose(b5);};this.qrDecompose=function(){this.push();var h5=b5<<4;a5.identity(b5-1);var s5=z4[(h5+4*0)+0],t5=z4[(h5+4*0)+1],u5=z4[(h5+4*0)+2],v5=z4[(h5+4*0)+3];var w5=Math.sqrt(((s5*s5+t5*t5)+u5*u5)+v5*v5);if(w5>0){var x5=[s5,t5,u5,v5];if(s5>=0)x5[0]+=w5; else x5[0]-=w5;x5[1]/=x5[0];x5[2]/=x5[0];x5[3]/=x5[0];x5[0]=1;var y5=2/(((1+x5[1]*x5[1])+x5[2]*x5[2])+x5[3]*x5[3]);this.loadRowMajor([[1-(y5*x5[0])*x5[0],(-y5*x5[0])*x5[1],(-y5*x5[0])*x5[2],(-y5*x5[0])*x5[3]],[(-y5*x5[1])*x5[0],1-(y5*x5[1])*x5[1],(-y5*x5[1])*x5[2],(-y5*x5[1])*x5[3]],[(-y5*x5[2])*x5[0],(-y5*x5[2])*x5[1],1-(y5*x5[2])*x5[2],(-y5*x5[2])*x5[3]],[(-y5*x5[3])*x5[0],(-y5*x5[3])*x5[1],(-y5*x5[3])*x5[2],1-(y5*x5[3])*x5[3]]],b5);a5.lmul(b5,0);a5.rmul(b5-1,0);}var s5=0,t5=z4[(h5+4*1)+1],u5=z4[(h5+4*1)+2],v5=z4[(h5+4*1)+3];var w5=Math.sqrt((t5*t5+u5*u5)+v5*v5);if(w5>0){var z5=[0,t5,u5,v5];if(t5>=0)z5[1]+=w5; else z5[1]-=w5;z5[2]/=z5[1];z5[3]/=z5[1];z5[1]=1;var a6=2/(((0+1)+z5[2]*z5[2])+z5[3]*z5[3]);this.loadRowMajor([[1,0,0,0],[0,1-(a6*z5[1])*z5[1],(-a6*z5[1])*z5[2],(-a6*z5[1])*z5[3]],[0,(-a6*z5[2])*z5[1],1-(a6*z5[2])*z5[2],(-a6*z5[2])*z5[3]],[0,(-a6*z5[3])*z5[1],(-a6*z5[3])*z5[2],1-(a6*z5[3])*z5[3]]],b5);a5.lmul(b5,0);a5.rmul(b5-1,0);}var s5=0,t5=0,u5=z4[(h5+4*2)+2],v5=z4[(h5+4*2)+3];var w5=Math.sqrt(u5*u5+v5*v5);if(w5>0){var b6=[0,0,u5,v5];if(u5>=0)b6[2]+=w5; else b6[2]-=w5;b6[3]/=b6[2];b6[2]=1;var c6=2/(((0+0)+1)+b6[3]*b6[3]);this.loadRowMajor([[1,0,0,0],[0,1,0,0],[0,0,1-(c6*b6[2])*b6[2],(-c6*b6[2])*b6[3]],[0,0,(-c6*b6[3])*b6[2],1-(c6*b6[3])*b6[3]]],b5);a5.lmul(b5,0);a5.rmul(b5-1,0);}this.loadRowMajor([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,-1]],b5);a5.lmul(b5,0);a5.rmul(b5-1,0);};this.getBasisAndNullSpace=function(){this.push();this.transpose();this.qrDecompose();this.pop();var d6=this.getColMajor();this.pop();var e6=[];var f6=[];for(var g6=0;g6<d6.length;++g6){var h6=d6[g6];var i6=this.transform(h6[0],h6[1],h6[2],h6[3]);var j6=((i6[0]*i6[0]+i6[1]*i6[1])+i6[2]*i6[2])+i6[3]*i6[3];if(j6<2.38e-7)f6.push(h6); else e6.push(h6);}return {basis:e6,nulls:f6};};this.loadQuaternion=function(w,g,y,z,stackIndex){if(typeof y=='undefined'&&typeof w[1]!='undefined'){g=w[1];y=w[2];z=w[3];w=w[0];stackIndex=g;}var k6=b5-(stackIndex|0)<<4;z4[k6+0]=(1-(2*y)*y)-(2*z)*z;z4[k6+4]=(2*g)*y-(2*z)*w;z4[k6+8]=(2*g)*z+(2*y)*w;z4[k6+1]=(2*g)*y+(2*z)*w;z4[k6+5]=(1-(2*g)*g)-(2*z)*z;z4[k6+9]=(2*y)*z-(2*g)*w;z4[k6+2]=(2*g)*z-(2*y)*w;z4[k6+6]=(2*y)*z+(2*g)*w;z4[k6+10]=(1-(2*g)*g)-(2*y)*y;z4[k6+3]=0;z4[k6+7]=0;z4[k6+11]=0;z4[k6+12]=0;z4[k6+13]=0;z4[k6+14]=0;z4[k6+15]=1;};this.loadRowMajor=function(i,stackIndex){var l6=b5-(stackIndex|0)<<4;if(i instanceof e){return this.load(i,stackIndex);}if(typeof i[0]=='undefined')i=arguments;if(typeof i[0][0]!='undefined'){z4[l6+0]=i[0][0];z4[l6+4]=i[0][1];z4[l6+8]=i[0][2];z4[l6+12]=i[0][3];z4[l6+1]=i[1][0];z4[l6+5]=i[1][1];z4[l6+9]=i[1][2];z4[l6+13]=i[1][3];z4[l6+2]=i[2][0];z4[l6+6]=i[2][1];z4[l6+10]=i[2][2];z4[l6+14]=i[2][3];z4[l6+3]=i[3][0];z4[l6+7]=i[3][1];z4[l6+11]=i[3][2];z4[l6+15]=i[3][3];} else {z4[l6+0]=i[0];z4[l6+4]=i[1];z4[l6+8]=i[2];z4[l6+12]=i[3];z4[l6+1]=i[4];z4[l6+5]=i[5];z4[l6+9]=i[6];z4[l6+13]=i[7];z4[l6+2]=i[8];z4[l6+6]=i[9];z4[l6+10]=i[10];z4[l6+14]=i[11];z4[l6+3]=i[12];z4[l6+7]=i[13];z4[l6+11]=i[14];z4[l6+15]=i[15];}};this.load=this.loadColMajor=function(i,stackIndex){var m6=b5-(stackIndex|0)<<4;if(i instanceof e)i=i.getData();if(typeof i[0]=='undefined')i=arguments;if(typeof i[0][0]!='undefined'){z4[m6+0]=i[0][0];z4[m6+4]=i[1][0];z4[m6+8]=i[2][0];z4[m6+12]=i[3][0];z4[m6+1]=i[0][1];z4[m6+5]=i[1][1];z4[m6+9]=i[2][1];z4[m6+13]=i[3][1];z4[m6+2]=i[0][2];z4[m6+6]=i[1][2];z4[m6+10]=i[2][2];z4[m6+14]=i[3][2];z4[m6+3]=i[0][3];z4[m6+7]=i[1][3];z4[m6+11]=i[2][3];z4[m6+15]=i[3][3];} else {z4[m6+0]=i[0];z4[m6+4]=i[4];z4[m6+8]=i[8];z4[m6+12]=i[12];z4[m6+1]=i[1];z4[m6+5]=i[5];z4[m6+9]=i[9];z4[m6+13]=i[13];z4[m6+2]=i[2];z4[m6+6]=i[6];z4[m6+10]=i[10];z4[m6+14]=i[14];z4[m6+3]=i[3];z4[m6+7]=i[7];z4[m6+11]=i[11];z4[m6+15]=i[15];}};this.getData=function(stackIndex){stackIndex=stackIndex|0;return new Float32Array(y4,b5-stackIndex<<6,64>>2);};this.getRowMajor=function(stackIndex){var n6=b5-(stackIndex|0)<<4;return [[z4[n6+0],z4[n6+4],z4[n6+8],z4[n6+12]],[z4[n6+1],z4[n6+5],z4[n6+9],z4[n6+13]],[z4[n6+2],z4[n6+6],z4[n6+10],z4[n6+14]],[z4[n6+3],z4[n6+7],z4[n6+11],z4[n6+15]]];};this.getColMajor=function(stackIndex){var o6=b5-(stackIndex|0)<<4;return [[z4[o6+0],z4[o6+1],z4[o6+2],z4[o6+3]],[z4[o6+4],z4[o6+5],z4[o6+6],z4[o6+7]],[z4[o6+8],z4[o6+9],z4[o6+10],z4[o6+11]],[z4[o6+12],z4[o6+13],z4[o6+14],z4[o6+15]]];};this.reset=function(){b5=1;this.identity();};Object.defineProperty(this,'length',{get:function(){return b5;}});}function f(g){var p6=g.toFixed(2);if(g>0)return ' '+p6;return p6;}function h(i,j){console.log(Array.from(i.getData(j)).map(f).join(', '));}e.debugDumpMatrix=h;if(typeof window!='undefined'&&typeof window.Math.fround=='undefined')window.Math.fround=function(g){return g;};if(typeof window!='undefined'&&typeof window.Math.imul=='undefined')window.Math.imul=function(g,y){return g*y;};return e;})();renderjs.MatrixStack=MatrixStack;var Bezier=(function(){var q6=400;var r6=function(duration){return 1.0/(200.0*duration);};var s6=function(p1x,p1y,p2x,p2y){var t6=3.0*p1x;var u6=3.0*(p2x-p1x)-t6;var v6=(1.0-t6)-u6;var w6=3.0*p1y;var x6=3.0*(p2y-p1y)-w6;var y6=(1.0-w6)-x6;var z6=function(t){return ((v6*t+u6)*t+t6)*t;};var a7=function(t){return ((y6*t+x6)*t+w6)*t;};var b7=function(t){return ((3.0*v6)*t+2.0*u6)*t+t6;};var c7=function(x,epsilon){var e7;var f7;var g7;var h7;var i7;var j7;for(g7=x,j7=0;j7<8;j7++){h7=z6(g7)-x;if(Math.abs(h7)<epsilon){return g7;}i7=b7(g7);if(Math.abs(i7)<1e-6){break;}g7=g7-h7/i7;}e7=0.0;f7=1.0;g7=x;if(g7<e7){return e7;}if(g7>f7){return f7;}while(e7<f7){h7=z6(g7);if(Math.abs(h7-x)<epsilon){return g7;}if(x>h7){e7=g7;} else {f7=g7;}g7=(f7-e7)*0.5+e7;}return g7;};var d7=function(x,epsilon){return a7(c7(x,epsilon));};return function(x,duration){return d7(x,r6( +duration||q6));};};return {linear:s6(0.0,0.0,1.0,1.0),ease:s6(0.25,0.1,0.25,1.0),easeIn:s6(0.42,0,1.0,1.0),easeOut:s6(0,0,0.58,1.0),easeInOut:s6(0.42,0,0.58,1.0),cubicBezier:function(p1x,p1y,p2x,p2y,x,duration){return s6(p1x,p1y,p2x,p2y)(x,duration);}};})();renderjs.Bezier=Bezier;var Geometry=(function(){function k7(l7,m7,n7){if((l7!=undefined&&m7==undefined)&&n7==undefined){this.x=l7.x||l7[0];this.y=l7.y||l7[1];this.z=l7.z||l7[2];} else {this.x= +(l7||0);this.y= +(m7||0);this.z= +(n7||0);}}Object.defineProperty(k7.prototype,0,{get:function(){return this.x;},set:function(l7){this.x=l7;}});Object.defineProperty(k7.prototype,1,{get:function(){return this.y;},set:function(m7){this.y=m7;}});Object.defineProperty(k7.prototype,2,{get:function(){return this.z;},set:function(n7){this.z=n7;}});Object.defineProperty(k7.prototype,'length',{get:function(){return Math.sqrt((this.x*this.x+this.y*this.y)+this.z*this.z);},set:function(newLength){var d9=this.length;this.x*=newLength/d9;this.y*=newLength/d9;this.z*=newLength/d9;}});Object.defineProperty(k7.prototype,'direction',{get:function(){var e9=this.length;return new k7(this.x/e9,this.y/e9,this.z/e9);},set:function(newDirection){var f9=this.length;var g9=newDirection.length;this.x=(newDirection.x*f9)/g9;this.y=(newDirection.y*f9)/g9;this.z=(newDirection.z*f9)/g9;}});Object.defineProperty(k7.prototype,'reverse',{get:function(){return new k7(-this.x,-this.y,-this.z);}});k7.prototype.multiply=function(s){this.x*=s;this.y*=s;this.z*=s;return this;};k7.prototype.dot=function(other){return (this.x*other.x+this.y*other.y)+this.z*other.z;};k7.dot=function(v1,v2){return (v1.x*v2.x+v1.y*v2.y)+v1.z*v2.z;};k7.prototype.colinearWith=function(that){var h9=k7.dot(this,this);var i9=k7.dot(that,that);var j9=h9*i9;var k9=k7.dot(this,that);return k9*k9-j9<2.38e-7;};k7.prototype.add=function(other){this.x+=other.x;this.y+=other.y;this.z+=other.z;return this;};k7.add=function(v1,v2){return new k7(v1.x+v2.x,v1.y+v2.y,v1.z+v2.z);};k7.prototype.subtract=function(other){this.x-=other.x;this.y-=other.y;this.z-=other.z;return this;};k7.subtract=function(v1,v2){return new k7(v1.x-v2.x,v1.y-v2.y,v1.z-v2.z);};k7.prototype.cross=function(other){return new k7(this.y*other.z-this.z*other.y,this.z*other.x-this.x*other.y,this.x*other.y-this.y*other.x);};function o7(p7,q7){if(typeof p7!='undefined'&&(p7 instanceof o7 || p7.length==2)){this.re=p7[0];this.im=p7[1];} else {this.re= +(p7||0);this.im= +(q7||0);}}Object.defineProperty(o7.prototype,'0',{get:function(){return this.re;}});Object.defineProperty(o7.prototype,'1',{get:function(){return this.im;}});o7.add=function(a,b){if(a instanceof o7){if(b instanceof o7)return new o7(a.re+b.re,a.im+b.im); else return new o7(a.re+b,a.im);} else {if(b instanceof o7)return new o7(a+b.re,b.im); else return new o7(a+b,0);}};o7.sub=function(a,b){if(a instanceof o7){if(b instanceof o7)return new o7(a.re-b.re,a.im-b.im); else return new o7(a.re-b,a.im);} else {if(b instanceof o7)return new o7(a-b.re,b.im); else return new o7(a-b,0);}};o7.mul=function(a,b){if(a instanceof o7){if(b instanceof o7)return new o7(a.re*b.re-a.im*b.im,a.re*b.im+a.im*b.re); else return new o7(a.re*b,a.im*b);} else {if(b instanceof o7)return new o7(a*b.re,a*b.im); else return new o7(a*b,0);}};o7.div=function(a,b){if(a instanceof o7){if(b instanceof o7){var l9=1.0/(b.re*b.re+b.im*b.im);return new o7((a.re*b.re+a.im*b.im)*l9,(a.im*b.re-a.re*b.im)*l9);} else {return new o7(a.re/b,a.im/b);}} else {if(b instanceof o7){var m9=1.0/(b.re*b.re+b.im*b.im);return new o7((a*b.re)*m9,(-a*b.im)*m9);} else {return new o7(a/b,0);}}};function r7(){var n9=arguments[0]<0?-1:arguments[0]==0?0:1;for(var o9=1;o9<arguments.length;++o9)if((arguments[o9]<0?-1:arguments[o9]==0?0:1)!=n9)return false;return true;}var s7={Polar:{project:function(l7,m7,n7){if(m7==undefined&&n7==undefined){m7=l7[1];n7=l7[2];l7=l7[0];}var p9=Math.sqrt((l7*l7+m7*m7)+n7*n7);var q9=Math.acos(m7/p9)/Math.PI;var r9=Math.atan2(l7,n7)/(2*Math.PI)+0.5;return [r9,q9];},getTextureCoordinates:function(v1,v2,v3){var s9=[s7.Polar.project(v1),s7.Polar.project(v2),s7.Polar.project(v3)];if(((v1[2]<0||v2[2]<0)||v3[2]<0)&&!r7(v1[0],v2[0],v3[0])){if(v1[0]<0)s9[0][0]+=1;if(v2[0]<0)s9[1][0]+=1;if(v3[0]<0)s9[2][0]+=1;}if(v1[1]==1||v1[1]== -1){s9[0][0]=(s9[1][0]+s9[2][0])/2;s9[0][1]=v1[1]==1?0:1;} else if(v2[1]==1||v2[1]== -1){s9[1][0]=(s9[0][0]+s9[2][0])/2;s9[1][1]=v2[1]==1?0:1;} else if(v3[1]==1||v3[1]== -1){s9[2][0]=(s9[0][0]+s9[1][0])/2;s9[2][1]=v3[1]==1?0:1;}return s9;}},Mercator:{project:function(l7,m7,n7){if(m7==undefined&&n7==undefined){m7=l7[1];n7=l7[2];l7=l7[0];}var t9=Math.sqrt((l7*l7+m7*m7)+n7*n7);var u9,v9;u9=Math.asin(m7/t9);v9=Math.atan2(l7,n7);var w9=v9/(2*Math.PI)+0.5;var x9=0.5-Math.log(Math.tan((u9+Math.PI/2)/2))/(2*Math.PI);return [w9,x9];},getTextureCoordinates:function(v1,v2,v3){var y9=[s7.Mercator.project(v1),s7.Mercator.project(v2),s7.Mercator.project(v3)];if(((v1[2]<0||v2[2]<0)||v3[2]<0)&&!r7(v1[0],v2[0],v3[0])){if(v1[0]<0)y9[0][0]+=1;if(v2[0]<0)y9[1][0]+=1;if(v3[0]<0)y9[2][0]+=1;}if(v1[1]==1||v1[1]== -1){y9[0][0]=(y9[1][0]+y9[2][0])/2;y9[0][1]=v1[1]==1?0:1;} else if(v2[1]==1||v2[1]== -1){y9[1][0]=(y9[0][0]+y9[2][0])/2;y9[1][1]=v2[1]==1?0:1;} else if(v3[1]==1||v3[1]== -1){y9[2][0]=(y9[0][0]+y9[1][0])/2;y9[2][1]=v3[1]==1?0:1;}return y9;}},HammerAitoff:{project:function(l7,m7,n7,outer){if(m7==undefined&&n7==undefined){m7=l7[1];n7=l7[2];l7=l7[0];}var z9=Math.sqrt((l7*l7+m7*m7)+n7*n7);var a10,b10;a10=Math.asin(m7/z9);b10=Math.atan2(l7,n7);if(outer&&b10<0){b10=b10+2*Math.PI;}var c10=Math.sqrt(1+Math.cos(a10)*Math.cos(b10/2));var d10=(Math.cos(a10)*Math.sin(b10/2))/c10;var e10=Math.sin(a10)/c10;return [(d10+1)/2,(1-e10)/2];},getTextureCoordinates:function(v1,v2,v3){var f10=[s7.HammerAitoff.project(v1),s7.HammerAitoff.project(v2),s7.HammerAitoff.project(v3)];if(!r7(v1[0],v2[0],v3[0])){var j10=v1[0]*(v2[2]-v1[2])-v1[2]*(v2[0]-v1[0]);var k10=v2[0]*(v3[2]-v2[2])-v2[2]*(v3[0]-v2[0]);var l10=v3[0]*(v1[2]-v3[2])-v3[2]*(v1[0]-v3[0]);var m10=((((j10<0&&k10<0)&&l10<0||(j10>=0&&k10>=0)&&l10>=0)||v1[0]==0&&v1[2]==0)||v2[0]==0&&v2[2]==0)||v3[0]==0&&v3[2]==0;if(m10){} else if((v1[2]<0||v2[2]<0)||v3[2]<0){if(v1[0]==0){if(v2[0]<0)f10[1]=s7.HammerAitoff.project(v2[0],v2[1],v2[2],true);if(v3[0]<0)f10[2]=s7.HammerAitoff.project(v3[0],v3[1],v3[2],true);}if(v2[0]==0){if(v1[0]<0)f10[0]=s7.HammerAitoff.project(v1[0],v1[1],v1[2],true);if(v3[0]<0)f10[2]=s7.HammerAitoff.project(v3[0],v3[1],v3[2],true);}if(v3[0]==0){if(v1[0]<0)f10[0]=s7.HammerAitoff.project(v1[0],v1[1],v1[2],true);if(v2[0]<0)f10[1]=s7.HammerAitoff.project(v2[0],v2[1],v2[2],true);}}}var g10=Math.sqrt((f10[1][0]-f10[2][0])*(f10[1][0]-f10[2][0])+(f10[1][1]-f10[2][1])*(f10[1][1]-f10[2][1]));var h10=Math.sqrt((f10[0][0]-f10[2][0])*(f10[0][0]-f10[2][0])+(f10[0][1]-f10[2][1])*(f10[0][1]-f10[2][1]));var i10=Math.sqrt((f10[0][0]-f10[1][0])*(f10[0][0]-f10[1][0])+(f10[0][1]-f10[1][1])*(f10[0][1]-f10[1][1]));if((g10>0.5||h10>0.5)||i10>0.5){console.log((((g10+',')+h10)+',')+i10);}return f10;}}};function t7(a9){var n10=[];for(var p10=0;p10<a9.vertices.length;++p10)n10.push([]);for(var p10=0;p10<a9.faces.length;++p10){if(n10[a9.faces[p10][0]].indexOf(a9.faces[p10][1])<0)n10[a9.faces[p10][0]].push(a9.faces[p10][1]);if(n10[a9.faces[p10][1]].indexOf(a9.faces[p10][2])<0)n10[a9.faces[p10][1]].push(a9.faces[p10][2]);if(n10[a9.faces[p10][2]].indexOf(a9.faces[p10][0])<0)n10[a9.faces[p10][2]].push(a9.faces[p10][0]);if(n10[a9.faces[p10][1]].indexOf(a9.faces[p10][0])<0)n10[a9.faces[p10][1]].push(a9.faces[p10][0]);if(n10[a9.faces[p10][0]].indexOf(a9.faces[p10][2])<0)n10[a9.faces[p10][0]].push(a9.faces[p10][2]);if(n10[a9.faces[p10][2]].indexOf(a9.faces[p10][1])<0)n10[a9.faces[p10][2]].push(a9.faces[p10][1]);}return n10;}function v7(b9){var q10=0;var r10=0;var s10=0;for(var t10=0;t10<b9.length;++t10){q10=q10+b9[t10][0];r10=r10+b9[t10][1];s10=s10+b9[t10][2];}var u10=Math.sqrt((q10*q10+r10*r10)+s10*s10);if(u10==0)return [0,0,1];return [q10/u10,r10/u10,s10/u10];}function x7(a9){var v10=[];for(var y10=0;y10<a9.vertices.length;++y10)v10.push([]);for(var y10=0;y10<a9.faces.length;++y10){var z10=a9.vertices[a9.faces[y10][0]];var a11=a9.vertices[a9.faces[y10][1]];var b11=a9.vertices[a9.faces[y10][2]];var c11=a11[0]-z10[0],d11=a11[1]-z10[1],e11=a11[2]-z10[2];var f11=b11[0]-a11[0],g11=b11[1]-a11[1],h11=b11[2]-a11[2];var i11=d11*h11-e11*g11;var j11=e11*f11-c11*h11;var k11=c11*g11-d11*f11;var l11=Math.sqrt((i11*i11+j11*j11)+k11*k11);var m11=[i11/l11,j11/l11,k11/l11];v10[a9.faces[y10][0]].push(m11);v10[a9.faces[y10][1]].push(m11);v10[a9.faces[y10][2]].push(m11);}for(var y10=0;y10<v10.length;++y10){if(v10[y10].length==0)v10[y10]=[0,0,1]; else if(v10[y10].length==1)v10[y10]=v10[y10][0]; else v10[y10]=v7(v10[y10]);}return v10;}function z7(x8,q8,c8){var n11=(q8[0]*x8[0]+q8[1]*x8[1])+q8[2]*x8[2];var o11=Math.sqrt(c8[0]*c8[0]+c8[1]*c8[1]);var p11=[q8[0]/o11-x8[0]*n11,q8[1]/o11-x8[1]*n11,q8[2]/o11-x8[2]*n11];var q11=Math.atan2(c8[1],c8[0]);var r11=Math.cos(-q11);var s11=Math.sin(-q11);var t11=[-x8[0],-x8[1],-x8[2]];var u11=t11[0]*t11[1],v11=t11[0]*t11[2],w11=t11[1]*t11[2];var x11=new k7((p11[0]+((((p11[0]*t11[0])*t11[0]+p11[1]*u11)+p11[2]*v11)-p11[0])*(1-r11))+(p11[2]*t11[1]-p11[1]*t11[2])*s11,(p11[1]+((((p11[1]*t11[1])*t11[1]+p11[0]*u11)+p11[2]*w11)-p11[1])*(1-r11))+(p11[0]*t11[2]-p11[2]*t11[0])*s11,(p11[1]+((((p11[2]*t11[2])*t11[2]+p11[0]*v11)+p11[1]*w11)-p11[2])*(1-r11))+(p11[0]*t11[1]-p11[1]*t11[0])*s11);var y11=x8.cross(x11).multiply(c8[0]==0?c8[1]:Math.abs(c8[1]/c8[0]));return [x11,y11];}function d8(x8,f8,g8,h8,i8,j8,k8){var z11=g8*k8-j8*h8;if(z11==0){return z7(x8,f8,[g8,h8]);}z11=1/z11;var a12=[z11*(k8*f8[0]-h8*i8[0]),z11*(k8*f8[1]-h8*i8[1]),z11*(k8*f8[2]-h8*i8[2])];var b12=[z11*(g8*i8[0]-j8*f8[0]),z11*(g8*i8[1]-j8*f8[1]),z11*(g8*i8[2]-j8*f8[2])];return [a12,b12];}function l8(v8,s8){var c12=null;var d12=null;var e12=null;for(var f12=0;f12<s8.length;++f12){var g12=s8[f12][0]-v8[0];var h12=s8[f12][1]-v8[1];var i12=s8[f12][2]-v8[2];var j12=(g12*g12+h12*h12)+i12*i12;if(c12===null||j12<d12){c12=f12;d12=j12;e12=[g12,h12,i12];}}return {index:c12,vertex:s8[f12],dx:e12,lendXSq:d12};}function o8(p8,q8){var k12=null;var l12=null;var m12=0;for(var o12=0;o12<p8.length;++o12)m12+=p8[o12]*p8[o12];for(var o12=0;o12<q8.length;++o12){var p12=0;var q12=0;for(var r12=0;r12<p8.length;++r12){p12+=q8[o12][r12]*p8[r12];q12+=q8[o12][r12]*q8[o12][r12];}var s12=p12/Math.sqrt(q12*m12);if(k12===null||Math.abs(s12)<Math.abs(l12)){k12=o12;l12=s12;}}return {index:k12,dx:q8[k12],cosT:l12};}function r8(s8,t8,u8,v8,w8,x8,y8){if(u8.length<3)throw {error:'require at least 3 neighbours to use least-squares'};if(u8.length==3){var f13=new k7(s8[u8[0]]).subtract(v8);var g13=new k7(s8[u8[1]]).subtract(v8);var h13=new k7(s8[u8[2]]).subtract(v8);var i13=[t8[u8[0]][0]-w8[0],t8[u8[0]][1]-w8[1]];var j13=[t8[u8[1]][0]-w8[0],t8[u8[1]][1]-w8[1]];var k13=[t8[u8[2]][0]-w8[0],t8[u8[2]][1]-w8[1]];if(new k7(f13).add(g13).colinearWith(h13))return d8(x8,f13,i13[0],i13[1],g13,j13[0],j13[1]);if(new k7(g13).add(h13).colinearWith(f13))return d8(x8,g13,j13[0],j13[1],h13,k13[0],k13[1]);if(new k7(h13).add(f13).colinearWith(g13))return d8(x8,h13,k13[0],k13[1],f13,i13[0],i13[1]);}if(u8.length==4){var l13=new k7(s8[u8[0]]).subtract(v8);var m13=new k7(s8[u8[1]]).subtract(v8);var n13=new k7(s8[u8[2]]).subtract(v8);var o13=new k7(s8[u8[3]]).subtract(v8);var p13=[t8[u8[0]][0]-w8[0],t8[u8[0]][1]-w8[1]];var q13=[t8[u8[1]][0]-w8[0],t8[u8[1]][1]-w8[1]];var r13=[t8[u8[2]][0]-w8[0],t8[u8[2]][1]-w8[1]];var s13=[t8[u8[3]][0]-w8[0],t8[u8[3]][1]-w8[1]];if(l13.colinearWith(m13)&&n13.colinearWith(o13))return d8(x8,l13,p13[0],p13[1],n13,r13[0],r13[1]);if(l13.colinearWith(n13)&&m13.colinearWith(o13)||l13.colinearWith(o13)&&m13.colinearWith(n13))return d8(x8,l13,p13[0],p13[1],m13,q13[0],q13[1]);}var t12=y8||new MatrixStack();var u12=0,v12=0,w12=0,x12=0,y12=0,z12=0;var a13=[0,0,0],b13=[0,0,0];for(var c13=0;c13<u8.length;++c13){var t13=s8[u8[c13]];var u13=[t13[0]-v8[0],t13[1]-v8[1],t13[2]-v8[2]];var v13=1/Math.sqrt((u13[0]*u13[0]+u13[1]*u13[1])+u13[2]*u13[2]);u12+=(u13[0]*u13[0])*v13;v12+=(u13[1]*u13[1])*v13;w12+=(u13[2]*u13[2])*v13;x12+=(u13[0]*u13[1])*v13;y12+=(u13[0]*u13[2])*v13;z12+=(u13[1]*u13[2])*v13;var w13=t8[u8[c13]];a13[0]+=(w13[0]*u13[0])*v13;a13[1]+=(w13[0]*u13[1])*v13;a13[2]+=(w13[0]*u13[2])*v13;b13[0]+=(w13[1]*u13[0])*v13;b13[1]+=(w13[1]*u13[1])*v13;b13[2]+=(w13[1]*u13[2])*v13;}t12.loadRowMajor([[u12,x12,y12,0],[x12,v12,z12,0],[y12,z12,w12,0],[0,0,0,1]]);if(t12.invert()){a13=t12.transform(a13);b13=t12.transform(b13);} else {var x13=t12.getBasisAndNullSpace();if(x13.nulls.length==3){a13=[0,0,0];b13=[0,0,0];} else if(x13.nulls.length==2){var y13=l8(v8,u8.map(function(i){return s8[i];}));var z13=[t8[u8[y13.index]][0]-w8[0],t8[u8[y13.index]][1]-w8[1]];return z7(x8,y13.dx,z13);} else if(x13.nulls.length==1){var a14=u8.map(function(i){return s8[i];});var b14=u8.map(function(i){return [t8[i][0]-w8[0],t8[i][1]-w8[1]];});var c14=l8(v8,a14);var d14=o8(b14[c14.index],b14);var e14=c14.index;var f14=d14.index;var g14=d14.cosT;if(Math.abs(d14.cosT)>0.7071){for(var h14=0;h14<u8.length;++h14){if(h14==c14.index||h14==d14.index)continue;var i14=[t8[u8[h14]][0]-w8[0],t8[u8[h14][1]]-w8[1]];var j14=i14[0]*i14[0]+i14[1]*i14[1];for(var k14=h14+1;k14<u8.length;++k14){if(k14==c14.index||k14==d14.index)continue;var l14=[t8[u8[k14]][0]-w8[0],t8[u8[k14][1]]-w8[1]];var m14=l14[0]*l14[0]+l14[1]*l14[1];var n14=(i14[0]*l14[0]+i14[1]*l14[1])/Math.sqrt(j14*m14);if(Math.abs(n14)<Math.abs(g14)){e14=h14;f14=k14;g14=n14;}}}}return d8(x8,a14[e14],b14[e14][0],b14[e14][1],a14[f14],b14[f14][0],b14[f14][1]);} else {throw {error:'That was sure unexpected!'};}}var e13=(x8[0]*a13[0]+x8[1]*a13[1])+x8[2]*a13[2];a13[0]-=e13*x8[0];a13[1]-=e13*x8[1];a13[2]-=e13*x8[2];var e13=(x8[0]*b13[0]+x8[1]*b13[1])+x8[2]*b13[2];b13[0]-=e13*x8[0];b13[1]-=e13*x8[1];b13[2]-=e13*x8[2];return [a13,b13];}function z8(a9,b9,c9){if(typeof b9=='undefined')b9=a9.normals;var o14=t7(a9);var p14=new MatrixStack();var q14=[];for(var r14=0;r14<o14.length;++r14){if(o14[r14].length==0){q14.push([[0,0,0],[0,0,0]]);continue;}var s14=new k7(a9.vertices[r14]);var t14=new k7(b9[r14]);var u14=a9.texCoords[r14];if(o14[r14].length==1){var v14=a9.vertices[o14[r14][0]];var w14=a9.texCoords[o14[r14][0]];var x14=[v14[0]-s14[0],v14[1]-s14[1],v14[2]-s14[2]];var y14=[w14[0]-u14[0],w14[1]-u14[1]];q14.push(z7(t14,x14,y14));} else if(o14[r14].length==2){var z14=a9.texCoords[o14[r14][0]];var a15=a9.texCoords[o14[r14][0]];var b15=z14[0]-u14[0],c15=z14[1]-u14[1];var d15=a15[0]-u14[0],e15=a15[1]-u14[1];var f15=new k7(a9.vertices[o14[r14][0]]).subtract(s14);var g15=new k7(a9.vertices[o14[r14][1]]).subtract(s14);q14.push(d8(t14,f15,b15,c15,g15,d15,e15));} else {q14.push(r8(a9.vertices,a9.texCoords,o14[r14],s14,a9.texCoords[r14],t14,p14));}}if(c9){for(var h15=0;h15<q14.length;++h15){var m15=q14[h15][0][0];var n15=q14[h15][0][1];var o15=q14[h15][0][2];var p15=Math.sqrt((m15*m15+n15*n15)+o15*o15);if(p15!=0)q14[h15][0]=[m15/p15,n15/p15,o15/p15];var m15=q14[h15][1][0];var n15=q14[h15][1][1];var o15=q14[h15][1][2];var p15=Math.sqrt((m15*m15+n15*n15)+o15*o15);if(p15!=0)q14[h15][1]=[m15/p15,n15/p15,o15/p15];}}return q14;}return {Vector3:k7,Maps:s7,Complex:o7,computeNormals:x7,computeTangentSpace:z8};})();renderjs.Geometry=Geometry;var Resources=(function(){function q15(r15,s15){if((s15.substring(0,1)=='/'||s15.indexOf('://')>=0)||s15.substring(0,5)=='data:')return s15;if(r15.length>0&&r15.substring(r15.length-1,0)!='/')return (r15+'/')+s15;return r15+s15;}function t15(u15){u15=u15||'';var v15=this;var w15=[];this.resourcePath=u15;this.createCache=function(type,factory){var x15={};this[type]=function(arg){return new Promise(function(resolve,reject){var y15=x15[arg];if(y15!=undefined){resolve(y15);} else {try{var z15=factory(arg);if(z15 instanceof Promise || typeof z15.then=='function'){w15.push(z15);if(w15.length==1)v15.onresourcesloading();z15.then(function(value){x15[arg]=value;w15.splice(w15.indexOf(z15),1);if(w15.length==0)v15.onresourcesloaded();resolve(value);},reject);} else {x15[arg]=z15;resolve(z15);}}catch(error){reject(error);}}});};this[type].set=function(src,data){x15[src]=data;};this[type].forget=function(data){for(var a16 in x15){if(x15[a16]===data){delete x15[a16];return;}}};};this.all=function(resourceMap){var b16=[];for(var c16 in resourceMap){var d16=resourceMap[c16];if(typeof d16=='function')b16.push(d16(c16)); else b16.push(d16);}return Promise.all(b16).then(function(resourceArray){var e16={};var f16=0;for(c16 in resourceMap)e16[c16]=resourceArray[f16++];return e16;});};Object.defineProperty(this,'pendingResourceCount',{get:function(){return this.pendingResources.length;}});this.createCache('image',function(url){return new Promise(function(resolve,reject){var g16=new Image();g16.onload=function(){resolve(g16);};g16.onerror=reject;g16.src=q15(v15.resourcePath,url);});});this.createCache('file',function(url){return $.get(q15(v15.resourcePath,url));});this.onresourcesloading=this.onresourcesloaded=function(){};}if(typeof Promise=='undefined'){window.Promise=(function(){function h16(i16){function j16(m16){n16=m16;q16.state=h16.FULFILLED;for(var r16=0;r16<o16.length;++r16)o16[r16](m16);o16=p16=null;}function l16(m16){n16=m16;q16.state=h16.REJECTED;for(var s16=0;s16<p16.length;++s16)p16[s16](m16);o16=p16=null;}var n16;var o16=[];var p16=[];var q16=this;this.state=h16.PENDING;i16(j16,l16);this.then=function(onFulfill,onReject){return new h16(function(nextResolve,nextReject){if(q16.state==h16.PENDING){if(onFulfill)o16.push(function(m16){nextResolve(onFulfill(m16));});if(onReject)p16.push(function(m16){nextReject(onReject(m16));});} else if(q16.state==h16.FULFILLED&&onFulfill){nextResolve(onFulfill(n16));} else if(q16.state==h16.REJECTED&&onReject){nextReject(onReject(n16));}});};}h16.PENDING=1;h16.FULFILLED=2;h16.REJECTED=3;h16.all=function(promiseArray){return new h16(function(resolve,reject){function t16(z16,v16){return function(result){if(x16){x16[z16]=result;--w16;if(w16==0)v16(x16);}};}var w16=promiseArray.length;var x16=[];for(var z16=0;z16<promiseArray.length;++z16)x16.push(null);for(var z16=0;z16<promiseArray.length;++z16)promiseArray[z16].then(t16(z16,resolve),function(error){x16=null;reject(error);});});};return h16;})();}return t15;})();renderjs.Resources=Resources;var Parser=(function(window){var a17={ident:'[a-zA-Z_$][a-zA-Z_$0-9]*',num:'-?[0-9]+(?:\\.[0-9]*)?',string:'(?:"[^"]*(?:""[^"]+)*")|(?:\'[^\']*(?:\'\'[^\']+)*\')',oper:'[+*^/%.,-]',bracket:'[)(]'};var b17=[a17.ident,a17.num,a17.oper,a17.bracket];var c17=('('+b17.join(')|('))+')';var d17=new Object();function e17(f17){if(f17[0]=="'")return f17.substring(1,f17.length-1).replace("''","'"); else return f17.substring(1,f17.length-1).replace('""','"');}function g17(h17,i17,j17){if(h17())return i17();if(j17)return j17();return 0.0;}function k17(){function l17(){if(d18.value=='-'){t17();var h18=a18();return {op:'negate',subtree:h18};} else {return a18();}}function m17(){if(d18.type==a17.ident){if(e18.value!='(')return r17({op:'lookup',name:d18.value});return n17();} else if(d18.type==a17.num){return r17({op:'const',value: +d18.value});} else if(d18.type==a17.string){return r17({op:'const',value:e17(d18.value)});} else if(d18.value=='('){t17();var i18=l17();t17();return i18;}}function n17(){var j18=d18.value;var k18=[];t17();t17();while(true){k18.push(l17());if(d18.value==',')t17(); else break;}t17();return {op:'call',name:j18,args:k18};}function o17(p17,q17){return function(){var l18=q17();while(p17.indexOf(d18.value)>=0){var m18=d18.value;t17();var n18=q17();l18={op:m18,left:l18,right:n18};}return l18;};}function r17(s17){t17();return s17;}function t17(){d18=f18.shift();e18=f18[0];return d18;}function u17(x17){if(x17.left){x17.left=u17(x17.left);x17.right=u17(x17.right);if(x17.left.op=='const'&&x17.right.op=='const'){switch(x17.op){case '+':return {op:'const',value:left.value+right.value};case '-':return {op:'const',value:left.value-right.value};case '*':return {op:'const',value:left.value*right.value};case '/':return {op:'const',value:left.value/right.value};case '%':return {op:'const',value:left.value%right.value};case '^':return {op:'const',value:Math.pow(left.value,right.value)};default:throw {error:'unknown operation '+x17.op};}}} else if(x17.subtree){x17.subtree=u17(x17.subtree);if(x17.subtree.op=='const')return {op:'const',value:-x17.subtree.value};} else if(x17.args instanceof Array){if(x17.name=='pi')return {op:'const',value:Math.PI};if(x17.name=='e')return {op:'const',value:Math.E};for(var o18=0;o18<x17.args.length;++o18)x17.args[o18]=u17(x17.args[o18]);}return x17;}function w17(x17){if(x17.op=='const')return function(){return x17.value;};if(x17.op=='call'){var r18=b18.builtins[x17.name];if(!r18)r18=b18.resolve(x17.name);if(!r18)throw {error:'unknown function '+x17.name};var s18=x17.args.map(w17);if(typeof r18!='function'){var t18=r18.lazyEval;if(r18.minArgs&&s18.length<r18.minArgs)throw {error:'too few arguments to function',reason:{funcName:x17.name,minArgs:r18.minArgs}};if(r18.singleton)r18=r18.singleton; else return r18.factory.apply(r18,s18);if(t18)return function(){return r18.apply(this,s18);};}return function(){return r18.apply(this,s18.map(function(a){return a();}));};}if(x17.op=='lookup'){var u18=b18.resolve(x17.name);if(typeof u18=='function')return u18;return function(){return u18;};}if(x17.op=='negate'){var v18=w17(x17.subtree);return function(){return -v18();};}var p18=w17(x17.left);var q18=w17(x17.right);switch(x17.op){case '+':return function(){return p18()+q18();};case '-':return function(){return p18()-q18();};case '*':return function(){return p18()*q18();};case '/':return function(){return p18()/q18();};case '%':return function(){return p18()%q18();};case '^':return function(){return Math.pow(p18(),q18());};default:throw {error:'unknown operation '+x17.op};}}var y17=o17(['^'],m17);var z17=o17(['*','/'],y17);var a18=o17(['+','-'],z17);var b18=this;var c18=1;var d18=null;var e18=null;var f18=[];var g18=null;this.resolve=function(name){return 0.0;};this.parse=function(a18){var w18=new RegExp(c17,'g');var x18;while((x18=w18.exec(a18))!==null){var y18=null;for(var z18=0;z18<b17.length;++z18){if(x18[z18+1]){y18=b17[z18];break;}}f18.push({type:y18,value:x18[0]});}f18.push({type:d17});t17();g18=l17();};this.createEvaluator=function(){var a19=u17(g18);return w17(a19);};this.builtins={sin:Math.sin,cos:Math.cos,tan:Math.tan,atan:Math.atan,atan2:Math.atan2,exp:Math.exp,log:Math.log,if:{lazyEval:true,minArgs:2,singleton:g17}};}k17.createEvaluator=function(expression,resolver,builtins){var b19=new k17();if(builtins){for(var c19 in builtins)b19.builtins[c19]=builtins[c19];}b19.resolve=resolver;b19.parse(expression);return b19.createEvaluator();};return k17;})();renderjs.Parser=Parser;var Shader=(function(){function d19(e19,f19,g19){function h19(i19,j19){return ((j19||'u')+i19[0].toUpperCase())+i19.substring(1);}var k19=e19.createProgram();var l19=e19.createShader(e19.VERTEX_SHADER);e19.shaderSource(l19,f19);e19.compileShader(l19);if(!e19.getShaderParameter(l19,e19.COMPILE_STATUS))throw {message:'invalid vertex shader',reason:e19.getShaderInfoLog(l19)};var m19=e19.getShaderInfoLog(l19);if(m19)console.log(m19);e19.attachShader(k19,l19);var n19=e19.createShader(e19.FRAGMENT_SHADER);e19.shaderSource(n19,g19);e19.compileShader(n19);if(!e19.getShaderParameter(n19,e19.COMPILE_STATUS))throw {message:'invalid fragment shader',reason:e19.getShaderInfoLog(n19)};m19=e19.getShaderInfoLog(n19);if(m19)console.log(m19);e19.attachShader(k19,n19);e19.linkProgram(k19);if(!e19.getProgramParameter(k19,e19.LINK_STATUS))throw {message:'program filed to link',reason:e19.getProgramInfoLog(k19)};this.glProgram=k19;this.use=function(){e19.useProgram(this.glProgram);};this.destroy=function(){e19.useProgram(this.glProgram);e19.detachShader(k19,l19);e19.detachShader(k19,n19);e19.deleteShader(k19,l19);e19.deleteShader(k19,n19);e19.useProgram(null);e19.deleteProgram(k19);};this.registerFlag=function(i19,initValue){var o19=e19.getUniformLocation(k19,h19(i19));var p19=initValue;if(o19){Object.defineProperty(this,i19,{get:function(){return p19;},set:function(value){p19=value;e19.uniform1i(o19,value?1:0);return p19;}});if(initValue)e19.uniform1i(o19,1);} else {console.log('WARNING: shader has no uniform '+h19(i19));}};this.registerVertexAttrib=function(i19,type,size){var q19=e19.getAttribLocation(k19,h19(i19,'a'));var r19;if(q19>=0){Object.defineProperty(this,i19,{get:function(){return r19;},set:function(newValue){r19=newValue;if(r19){e19.bindBuffer(e19.ARRAY_BUFFER,r19);e19.vertexAttribPointer(q19,size,type,false,0,0);e19.enableVertexAttribArray(q19);} else {e19.disableVertexAttribArray(q19);}return r19;}});} else {console.log('WARNING: shader has no attribute '+h19(i19,'a'));}};this.setSampler=function(i19,textureUnit){var s19=e19.getUniformLocation(k19,i19);e19.useProgram(this.glProgram);e19.uniform1i(s19,textureUnit);};this.registerUniformMatrix=function(i19){var t19=h19(i19);var u19=e19.getUniformLocation(k19,t19);var v19=e19.getUniformLocation(k19,t19+'Inverse');var w19;if(u19||v19){Object.defineProperty(this,i19,{get:function(){return w19;},set:function(newValue){w19=newValue;if(u19)e19.uniformMatrix4fv(u19,false,w19.getData());if(v19){w19.push();w19.invert();e19.uniformMatrix4fv(v19,false,w19.getData());w19.pop();}return w19;}});} else {console.log('WARNING: shader has no uniform '+t19);}};this.registerUniformInt=function(i19){var x19=e19.getUniformLocation(k19,h19(i19));var y19;if(x19){Object.defineProperty(this,i19,{get:function(){return y19;},set:function(newValue){y19=newValue;e19.uniform1i(x19,y19);return y19;}});} else {console.log('WARNING: shader has no uniform '+h19(i19));}};this.registerUniformFloat=function(i19){var z19=e19.getUniformLocation(k19,h19(i19));var a20;if(z19){Object.defineProperty(this,i19,{get:function(){return a20;},set:function(newValue){a20=newValue;e19.uniform1f(z19,a20);return a20;}});} else {console.log('WARNING: shader has no uniform '+h19(i19));}};this.registerUniformComplex=function(i19,initVal){var b20=h19(i19);var c20=e19.getUniformLocation(k19,b20+'.Re');var d20=e19.getUniformLocation(k19,b20+'.Im');var e20=new Geometry.Complex(initVal);if(c20){Object.defineProperty(this,i19,{get:function(){if(e20.Im==0.0)return e20.re; else return e20;},set:function(newRe,newIm){e20=new Geometry.Complex(newRe,newIm);e19.uniform1f(c20,e20.re);e19.uniform1f(d20,e20.im);return e20;}});} else {console.log('WARNING: shader has no uniform '+h19(i19));}};this.registerUniformFloat3=function(i19){var f20=e19.getUniformLocation(k19,h19(i19));var g20;if(f20){Object.defineProperty(this,i19,{get:function(){return g20;},set:function(){if(typeof arguments[1]=='undefined')g20=[arguments[0][0],arguments[0][1],arguments[0][2]]; else g20=[arguments[0],arguments[1],arguments[2]];e19.uniform3f(f20,g20[0],g20[1],g20[2]);return g20;}});} else {console.log('WARNING: shader has no uniform '+h19(i19));}};this.registerUniformFloat4=function(i19){var h20=e19.getUniformLocation(k19,h19(i19));var i20;if(h20){Object.defineProperty(this,i19,{get:function(){return i20;},set:function(){if(typeof arguments[1]=='undefined')i20=[arguments[0][0],arguments[0][1],arguments[0][2],arguments[0][3]]; else i20=[arguments[0],arguments[1],arguments[2],arguments[3]];e19.uniform4f(h20,i20[0],i20[1],i20[2],i20[3]);return i20;}});} else {console.log('WARNING: shader has no uniform '+h19(i19));}};this.registerUniformFloat3Array=function(i19){var j20=e19.getUniformLocation(k19,h19(i19));var k20;if(j20){Object.defineProperty(this,i19,{get:function(){return k20;},set:function(newValue){k20=newValue;if(k20.length==0)return k20;if(typeof k20[0][0]!='undefined'){var l20=new Float32Array(3*k20.length);var m20=0;for(var n20=0;n20<k20.length;++n20){l20[m20++]=k20[n20][0];l20[m20++]=k20[n20][1];l20[m20++]=k20[n20][2];}e19.uniform3fv(j20,l20);} else {e19.uniform3fv(j20,k20);}return k20;}});} else {console.log('WARNING: shader has no uniform '+h19(i19));}};this.setUniform2f=function(uniformName,x,y){var o20=e19.getUniformLocation(k19,uniformName);if(o20){e19.useProgram(k19);e19.uniform2f(o20,x,y);}};}return d19;})();renderjs.Shader=Shader;var createRenderer=(function(){function p20(q20,r20,s20,t20){function x20(y20){if(!p23.running&&!e24)return;if(q23==undefined){q23=y20;r23=p23.time;}p23.time=(y20-q23)/1000+r23;c21(p23.time);requestAnimationFrame(x20);}function z20(x22){b21();c21(x22);p23.frameCount++;}function b21(){q20.clearColor(0.0,0.0,0.0,1.0);q20.enable(q20.DEPTH_TEST);q20.depthFunc(q20.LEQUAL);c24.use();c24.viewportMatrix=h24;q20.bindFramebuffer(q20.FRAMEBUFFER,null);}function c21(x22){f24.identity();c24.cameraMatrix=g24;x23=e21();c24.numberOfLights=x23.types.length;c24.lightPositions=x23.positions;c24.lightColors=x23.colors;c24.ambientLight=x23.ambient;q20.clear(q20.COLOR_BUFFER_BIT|q20.DEPTH_BUFFER_BIT);q22(c24,s23,x22);p23.frameCount++;p23.dirty=false;}function e21(){var p24=[];var q24=[];var r24=[];var s24=[0.0,0.0,0.0];y23.identity();function t24(u24){if(u24.transform&&(u24.lights||u24.childrenWithLights)){y23.push();u24.transform(y23);}if(u24.lights){for(var w24=0;w24<u24.lights.length;++w24){var x24=u24.lights[w24];if(x24.type=='ambient'){s24[0]+=x24.color[0]();s24[1]+=x24.color[1]();s24[2]+=x24.color[2]();continue;}p24.push(x24.type);var y24=y23.transform(x24.position[0](),x24.position[1](),x24.position[2]());q24.push(y24[0]);q24.push(y24[1]);q24.push(y24[2]);if(x24.color){r24.push(x24.color[0]());r24.push(x24.color[1]());r24.push(x24.color[2]());} else {r24.push(1.0);r24.push(1.0);r24.push(1.0);}}}if(u24.childrenWithLights){for(var z24=0;z24<u24.childrenWithLights.length;++z24)t24(u24.childrenWithLights[z24]);}if(u24.transform&&(u24.lights||u24.childrenWithLights))y23.pop();}for(var v24=0;v24<s23.length;++v24)t24(s21(s23[v24]));return {types:p24,positions:q24,colors:r24,ambient:s24};}function f21(g21){if(typeof g21=='number')return function(){return g21;};if(typeof g21=='boolean')return function(){return g21?1.0:0.0;};return Parser.createEvaluator(g21,function(parameter){if(parameter=='$time')return function(){return p23.time;};return function(){var a25=p23.parameters[parameter];if(typeof a25=='function')return a25(p23.time);if(typeof a25=='number')return a25;if(typeof a25=='boolean')return a25?1.0:0.0;return 0.0;};},o23);}function h21(i21,j21){return function(){i21.apply(this,arguments);j21.apply(this,arguments);};}function k21(l21,m21){return function(){var b25=[m21];for(var c25=0;c25<arguments.length;++c25)b25.push(arguments[c25]);l21.apply(this,b25);};}function n21(o21){if(typeof o21=='string'){if(o21.length==0)return function(){};if(o21[0]=='#'){var d25=o21.substring(1);return k21(function(d25,m){var e25=t23[d25];if(e25){var f25=p23.getTransform(e25);m.push();m.load(f25);m.mul();}},d25);} else {var g25=o21;return k21(function(g25,m){var h25=p23.parameters[g25];if(h25){if(typeof h25=='function')h25=h25(p23.time);m.push();m.load(h25);m.mul();}},g25);}}if(o21[0]=='rotate'){var i25=f21(o21[1]);var j25=f21(o21[2]);var k25=f21(o21[3]);var l25=f21(o21[4]);return function(matrix){matrix.rotate(i25(),[j25(),k25(),l25()]);};} else if(o21[0]=='translate'){var m25=f21(o21[1]);var n25=f21(o21[2]);var o25=f21(o21[3]);return function(matrix){matrix.translate(m25(),n25(),o25());};} else if(o21[0]=='scale'){var p25=f21(o21[1]);var q25=f21(o21[2]);var r25=f21(o21[3]);return function(matrix){matrix.scale(p25(),q25(),r25());};} else {throw {error:'unsupported transform',reason:o21};}}function p21(l22,v22){v22.vertexPosition=l22.vertexBuffer;v22.vertexNormal=l22.normalBuffer;v22.textureCoord=l22.texCoords;if(l22.texture){q20.activeTexture(q20.TEXTURE0);q20.bindTexture(q20.TEXTURE_2D,l22.texture);}if(l22.normalMap){v22.normalMapping=true;q20.activeTexture(q20.TEXTURE1);q20.bindTexture(q20.TEXTURE_2D,l22.normalMap);v22.uVector=l22.tangentSpace.u;v22.vVector=l22.tangentSpace.v;}q20.bindBuffer(q20.ELEMENT_ARRAY_BUFFER,l22.faceBuffer);q20.drawElements(q20.TRIANGLES,l22.faceCount,q20.UNSIGNED_SHORT,0);if(l22.normalMap){v22.normalMapping=false;v22.uVector=null;v22.vVector=null;}}function s21(w22){return w22.__renderData||(w22.__renderData=d22(w22));}function u21(v22){v22.registerVertexAttrib('vertexPosition',q20.FLOAT,3);v22.registerVertexAttrib('vertexNormal',q20.FLOAT,3);v22.registerVertexAttrib('textureCoord',q20.FLOAT,2);v22.registerVertexAttrib('uVector',q20.FLOAT,3);v22.registerVertexAttrib('vVector',q20.FLOAT,3);v22.registerUniformMatrix('modelMatrix');v22.registerUniformMatrix('cameraMatrix');v22.registerUniformMatrix('viewportMatrix');v22.registerUniformInt('numberOfLights');v22.registerUniformFloat3Array('lightPositions');v22.registerUniformFloat3Array('lightColors');v22.registerUniformFloat3('ambientLight');}function w21(x21,y21){var s25=c24;try{var t25=new Shader(p23.gl,y21[x21.vertex],y21[x21.fragment]);t25.use();u21(t25);if(x21.uniforms){for(var u25 in x21.uniforms){var v25,w25;if(typeof x21.uniforms[u25]=='string')v25=x21.uniforms[u25],w25=undefined; else v25=x21.uniforms[u25].type,w25=x21.uniforms[u25].default;switch(v25){case 'mat4':t25.registerUniformMatrix(u25);break;case 'int':case 'bool':t25.registerUniformInt(u25);break;case 'float':t25.registerUniformFloat(u25);break;case 'complex':t25.registerUniformComplex(u25);w25=new Complex(w25);break;case 'vec3':t25.registerUniformFloat3(u25);break;case 'vec3[]':t25.registerUniformFloat3Array(u25);break;default:p23.onerror({error:'unsupported uniform type',reason:v25});continue;}if(typeof w25!=undefined)t25[u25]=w25;}}if(x21.attributes){for(var x25 in x21.attributes){var y25,z25=x21.attributes[x25].size|0;switch(x21.attributes[x25].type){case 'float':y25=q20.FLOAT;break;case 'int':y25=q20.INT;break;case 'double':y25=q20.DOUBLE;break;case 'uint':y25=q20.UNSIGNED_INT;break;case 'short':y25=q20.SHORT;break;case 'ushort':y25=q20.UNSIGNED_SHORT;break;default:p23.onerror({error:'unsupported vertex attribute type',reason:x21.attributes[x25].type});continue;}t25.registerVertexAttrib(x25,z25,y25);}}return t25;}catch(x){p23.onerror(x);}finally{c24=s25;c24.use();}}function z21(c22){c22.refCount=(c22.refCount||0)+1;}function b22(c22){c22.refCount=c22.refCount-1;if(c22.refCount==0)t20.texture.forget(c22);}function d22(w22){var a26={};if(w22.id)t23[w22.id]=w22;if(w22.mesh){a26.mesh={};a26.mesh.vertexBuffer=y22(w22.mesh.vertices,3);if(w22.mesh.texture){a26.mesh.texture=d24;t20.texture(w22.mesh.texture).then(function(c22){a26.mesh.texture=c22;i23();});}var b26=w22.mesh.normals;if(!b26)b26=Geometry.computeNormals(w22.mesh);a26.mesh.normalBuffer=y22(b26,3);if(w22.mesh.texCoords){a26.mesh.texCoords=y22(w22.mesh.texCoords,2);if(w22.mesh.normalMap){a26.mesh.normalMap=null;t20.texture(w22.mesh.normalMap).then(function(c22){a26.mesh.normalMap=c22;i23();});if(!w22.mesh.tangentSpace){var c26=Geometry.computeTangentSpace(w22.mesh,b26,true);a26.mesh.tangentSpace={u:y22(c26,3,q20.FLOAT,q20.ARRAY_BUFFER,1,0,0),v:y22(c26,3,q20.FLOAT,q20.ARRAY_BUFFER,1,0,1)};} else {a26.mesh.tangentSpace={u:y22(w22.mesh.tangentSpace.u,3),v:y22(w22.mesh.tangentSpace.v,3)};}}}if(w22.mesh.mode=='strip'){throw {error:'mesh mode not supported',reason:w22.mesh.mode};} else if(w22.mesh.faces){a26.mesh.faceBuffer=y22(w22.mesh.faces,3,q20.UNSIGNED_SHORT,q20.ELEMENT_ARRAY_BUFFER);a26.mesh.faceCount=3*w22.mesh.faces.length;a26.mesh.draw=p21;} else {}}if(w22.transform){if(typeof w22.transform=='string'){a26.transform=n21(w22.transform);} else {var d26=undefined;for(var e26=0;e26<w22.transform.length;++e26){var f26=n21(w22.transform[e26]);if(d26)d26=h21(d26,f26); else d26=f26;}a26.transform=d26;}}if(w22.shader){if(w22.shader.vertex&&w22.shader.fragment){var g26={};g26[w22.shader.vertex]=p23.resources.file;g26[w22.shader.fragment]=p23.resources.file;a26.pending=true;p23.resources.all(g26).then(function(y21){a26.program=w21(w22.shader,y21);a26.pending=false;i23();});if(w22.shader.textureUnits)a26.textureUnits=w22.shader.textureUnits;if(w22.shader.blend){switch(w22.shader.blend){case 'default':default:a26.blend=function(q20){q20.enable(q20.BLEND);q20.blendEquation(q20.FUNC_ADD);q20.blendFunc(q20.SRC_ALPHA,q20.ONE_MINUS_SRC_ALPHA);};}}}if(w22.shader.parameters){a26.uniforms=a26.uniforms||{};for(var h26 in w22.shader.parameters)a26.uniforms[h26]=f21(w22.shader.parameters[h26]);}}if(w22.material){a26.uniforms=a26.uniforms||{};for(var i26 in w22.material)a26.uniforms[i26]=f21(w22.material[i26]);}if(w22.flags){a26.flags={};a26.uniforms=a26.uniforms||{};for(var j26 in w22.flags){var k26=w22.flags[j26];var l26=f21(k26);a26.flags[j26]=l26;a26.uniforms[j26]=l26;}}if(w22.lights){a26.lights=w22.lights.map(function(light){var o26=light.type;if(o26=='point')o26=1;var p26={type:o26};if(light.position){p26.position=[f21(light.position[0]),f21(light.position[1]),f21(light.position[2])];}if(light.color){p26.color=[f21(light.color[0]),f21(light.color[1]),f21(light.color[2])];}return p26;});var m26=a26;for(var n26=w22.parent;n26&&n26.__renderData;n26=n26.parent){n26.__renderData.childrenWithLights=n26.__renderData.childrenWithLights||[];n26.__renderData.childrenWithLights.push(m26);m26=n26.__renderData;}}w22.__renderData=a26;if(w22.children){for(var q26=0;q26<w22.children.length;++q26)d22(w22.children[q26]);}return a26;}function f22(w22,h22){var r26=w22.__renderData;if(w22.id&&t23[w22.id]===w22)delete t23[w22.id];if(r26){if(r26.mesh){if(r26.mesh.vertexBuffer)q20.deleteBuffer(r26.mesh.vertexBuffer);if(r26.mesh.normalBuffer)q20.deleteBuffer(r26.mesh.normalBuffer);if(r26.mesh.texCoords)q20.deleteBuffer(r26.mesh.texCoords);if(r26.mesh.tangentSpace){q20.deleteBuffer(r26.mesh.tangentSpace.u);q20.deleteBuffer(r26.mesh.tangentSpace.v);}if(r26.mesh.faceBuffer)q20.deleteBuffer(r26.mesh.faceBuffer);if(r26.mesh.texture)b22(r26.mesh.texture);if(r26.mesh.normalMap)b22(r26.mesh.normalMap);}if(r26.shader)x21.destroy();delete w22.__renderData;}if(h22&&w22.children){for(var s26=0;s26<w22.children.length;++s26)f22(w22.children[s26]);}}function i22(){q20.bindFramebuffer(q20.FRAMEBUFFER,z23.framebuffer);q20.clearColor(0.0,0.0,0.0,0.0);q20.clear(q20.COLOR_BUFFER_BIT|q20.DEPTH_BUFFER_BIT);q20.clearColor(0.0,0.0,0.0,1.0);}function j22(){q20.bindFramebuffer(q20.FRAMEBUFFER,null);b24.use();b24.viewportMatrix=h24;b24.vertexPosition=b24.vertices;b24.textureCoord=b24.texCoords;q20.activeTexture(q20.TEXTURE0);q20.bindTexture(q20.TEXTURE_2D,z23.texture);q20.enable(q20.BLEND);q20.blendEquation(q20.FUNC_ADD);q20.blendFunc(q20.SRC_ALPHA,q20.ONE_MINUS_SRC_ALPHA);q20.drawArrays(q20.TRIANGLES,0,6);q20.disable(q20.BLEND);c24.use();}function k22(l22){var t26=new Uint16Array((l22.faces.length*3)*2);for(var u26=0;u26<l22.faces.length;++u26){t26[6*u26+0]=l22.faces[u26][0];t26[6*u26+1]=l22.faces[u26][1];t26[6*u26+2]=l22.faces[u26][1];t26[6*u26+3]=l22.faces[u26][2];t26[6*u26+4]=l22.faces[u26][2];t26[6*u26+5]=l22.faces[u26][0];}var v26=q20.createBuffer();q20.bindBuffer(q20.ELEMENT_ARRAY_BUFFER,v26);q20.bufferData(q20.ELEMENT_ARRAY_BUFFER,t26,q20.STATIC_DRAW);return v26;}function m22(v22,w22,p22){var w26=v22.wireframe;if(!p22.mesh.edgeList)p22.mesh.edgeList=k22(w22.mesh);v22.renderEdges=true;v22.vertexPosition=p22.mesh.vertexBuffer;v22.vertexNormal=p22.mesh.normalBuffer;v22.textureCoord=p22.mesh.texCoords;v22.wireframe=false;q20.bindBuffer(q20.ELEMENT_ARRAY_BUFFER,p22.mesh.edgeList);q20.drawElements(q20.LINES,p22.mesh.faceCount*2,q20.UNSIGNED_SHORT,0);v22.renderEdges=false;v22.wireframe=w26;}function q22(v22,s22,x22){for(var y26=0;y26<s22.length;++y26){if(!s22[y26].flags||!s22[y26].flags.wireframe)u22(v22,s22[y26],x22);}for(var y26=0;y26<s22.length;++y26){if(s22[y26].flags&&s22[y26].flags.wireframe)u22(v22,s22[y26],x22);}}function u22(v22,w22,x22){var z26=s21(w22);if(z26.pending)return;if(p23.onbeforerendernode)p23.onbeforerendernode(w22,x22,v22);var a27=null;var b27=null;var c27=null;var d27=(z26.flags&&z26.flags.renderEdges)&&z26.flags.renderEdges();if(z26.program){b27=v22;v22=z26.program;v22.use();v22.cameraMatrix=b27.cameraMatrix;v22.cameraMatrixInverse=b27.cameraMatrixInverse;v22.viewportMatrix=b27.viewportMatrix;v22.viewportMatrixInverse=b27.viewportMatrixInverse;v22.numberOfLights=x23.types.length;v22.lightPositions=x23.positions;v22.lightColors=x23.colors;}if(z26.uniforms){a27={};for(var e27 in z26.uniforms){var f27=z26.uniforms[e27];a27[e27]=v22[e27];v22[e27]=f27();}}if(z26.transform){f24.push();z26.transform(f24);}if(z26.blend){c27=i24;i24=z26.blend;i24(q20);}if(z26.mesh){v22.modelMatrix=f24;if(v22.wireframe){if(d27)m22(v22,w22,z26);i22();}z26.mesh.draw(z26.mesh,v22);if(v22.wireframe)j22();if(!v22.wireframe&&d27)m22(v22,w22,z26);}if(w22.children)q22(v22,w22.children,x22);if(c27){i24=c27;i24(q20);}if(z26.transform)f24.pop();if(a27){for(var g27 in a27)v22[g27]=a27[g27];}if(b27){b27.use();}if(p23.onafterrendernode)p23.onafterrendernode(w22,x22,v22);}function y22(z22,a23,b23,c23,d23,e23,f23){b23=b23||q20.FLOAT;c23=c23||q20.ARRAY_BUFFER;d23=d23||1;e23=e23|0;var h27;var i27=(z22.length-e23)/d23|0;if(b23==q20.FLOAT)h27=new Float32Array(i27*a23); else if(b23==q20.UNSIGNED_SHORT)h27=new Uint16Array(i27*a23); else throw {error:'unknown buffer type',reason:b23};var j27=0;if(typeof f23=='undefined'){for(var l27=e23;l27<z22.length;l27+=d23)for(var j=0;j<a23;++j)h27[j27++]=z22[l27][j];} else {for(var m27=e23;m27<z22.length;m27+=d23)for(var j=0;j<a23;++j)h27[j27++]=z22[m27][f23][j];}var k27=q20.createBuffer();q20.bindBuffer(c23,k27);q20.bufferData(c23,h27,q20.STATIC_DRAW);return k27;}function g23(h23){h23=h23&&j24.floatTexture;var n27=q20.createFramebuffer();q20.bindFramebuffer(q20.FRAMEBUFFER,n27);n27.width=r20;n27.height=s20;var o27=q20.createTexture();q20.bindTexture(q20.TEXTURE_2D,o27);q20.texParameteri(q20.TEXTURE_2D,q20.TEXTURE_MIN_FILTER,q20.NEAREST);q20.texParameteri(q20.TEXTURE_2D,q20.TEXTURE_MAG_FILTER,q20.NEAREST);q20.texParameteri(q20.TEXTURE_2D,q20.TEXTURE_WRAP_S,q20.CLAMP_TO_EDGE);q20.texParameteri(q20.TEXTURE_2D,q20.TEXTURE_WRAP_T,q20.CLAMP_TO_EDGE);if(h23)q20.texImage2D(q20.TEXTURE_2D,0,q20.RGBA,r20,s20,0,q20.RGBA,q20.FLOAT,null); else q20.texImage2D(q20.TEXTURE_2D,0,q20.RGBA,r20,s20,0,q20.RGBA,q20.UNSIGNED_BYTE,null);var p27=q20.createRenderbuffer();q20.bindRenderbuffer(q20.RENDERBUFFER,p27);q20.renderbufferStorage(q20.RENDERBUFFER,q20.DEPTH_COMPONENT16,r20,s20);q20.framebufferTexture2D(q20.FRAMEBUFFER,q20.COLOR_ATTACHMENT0,q20.TEXTURE_2D,o27,0);q20.framebufferRenderbuffer(q20.FRAMEBUFFER,q20.DEPTH_ATTACHMENT,q20.RENDERBUFFER,p27);q20.bindTexture(q20.TEXTURE_2D,null);q20.bindRenderbuffer(q20.RENDERBUFFER,null);q20.bindFramebuffer(q20.FRAMEBUFFER,null);return {framebuffer:n27,texture:o27,renderbuffer:p27};}function i23(){p23.dirty=true;p23.onrepaintrequired();}function j23(k23){console.log('ERROR: '+k23.message);if(k23.reason)console.log(k23.reason);throw k23;}function l23(){k24.then(function(){b21();q23=undefined;requestAnimationFrame(x20);},j23);}function m23(){++e24;if(e24==1&&!p23.running)l23();}function n23(){--e24;}var o23={smooth:{minArgs:3,factory:function(smoothingFunction,duration,input){var q27;smoothingFunction=smoothingFunction&&smoothingFunction()||'ease';if(typeof smoothingFunction=='string'){var a28=Bezier[smoothingFunction];q27=function(dur){return function(t){return a28(t,dur);};};} else {q27=function(dur){return function(t){return Bezier.cubicBezier(arguments[0](),arguments[1](),arguments[2](),arguments[3],t,dur);};};duration=arguments[4];input=arguments[5];}var r27=undefined;var s27=undefined;var t27=undefined;var u27=undefined;var v27=undefined;var w27=undefined;var x27=undefined;var y27=input;var z27=1.0;return function(){var b28=y27();if(t27==undefined)t27=b28;if(t27!=b28){var c28= +duration();if(c28!=r27){r27=c28;s27=q27(c28);}var d28;if(x27!=undefined)d28=(x27-p23.Time)/(x27-w27);if((x27!=undefined&&d28>0.01)&&d28<0.99){var e28=p23.time;var f28=e28+c28;var g28=f28-x27;var h28=(e28*((e28+g28)-x27))/(e28-x27);var i28=s27(e28-w27);var j28=s27(e28-h28);var k28=((i28*(v27-u27)+u27)-j28*b28)/(1-j28);z27=c28/(f28-h28);v27=b28;w27=h28;x27=f28;u27=k28;} else {if(x27==undefined)m23();z27=1.0;u27=t27;w27=p23.time;x27=w27+c28;v27=b28;}t27=b28;}if(x27==undefined)return b28;if(x27<=p23.time){w27=x27=v27=undefined;n23();return b28;}if(w27>p23.time){console.log('nothing to see here');}return u27+(v27-u27)*s27((p23.time-w27)*z27);};}}};t20.createCache('texture',function(url){return t20.image(url).then(function(img){var l28=q20.createTexture();q20.bindTexture(q20.TEXTURE_2D,l28);q20.texImage2D(q20.TEXTURE_2D,0,q20.RGBA,q20.RGBA,q20.UNSIGNED_BYTE,img);q20.texParameteri(q20.TEXTURE_2D,q20.TEXTURE_MAG_FILTER,q20.LINEAR);q20.texParameteri(q20.TEXTURE_2D,q20.TEXTURE_MIN_FILTER,q20.LINEAR_MIPMAP_NEAREST);q20.generateMipmap(q20.TEXTURE_2D);q20.bindTexture(q20.TEXTURE_2D,null);return l28;});});var p23=this;this.gl=q20;this.dirty=false;this.resources=t20;var q23,r23;var s23=[];var t23={};var u23={};var v23={};var w23=[];var x23=[];var y23=new MatrixStack();var z23;var a24;var b24;var c24;var d24;var e24=0;var f24=new MatrixStack();var g24=new MatrixStack();var h24=new MatrixStack();var i24=function(q20){q20.disable(q20.BLEND);};var j24={fragDepth:q20.getExtension('EXT_frag_depth'),floatTexture:q20.getExtension('OES_texture_float'),floatLinear:q20.getExtension('OES_float_linear'),colorBufferFloat:q20.getExtension('WEBGL_color_buffer_float')};var k24=t20.all({'std-vertex.es2':t20.file,'std-fragment.es2':t20.file,'wfm-vertex.es2':t20.file,'wfm-fragment.es2':t20.file,'loadingtexture.png':t20.image}).then(function(p22){a24=new Shader(q20,p22['std-vertex.es2'],p22['std-fragment.es2']);u21(a24);a24.registerFlag('wireframe');a24.registerFlag('renderEdges');a24.setSampler('uTexture',0);a24.setSampler('uNormalMap',1);a24.registerUniformInt('normalMapping');a24.registerUniformComplex('refractiveIndex');a24.registerUniformFloat('gloss');a24.registerUniformFloat4('highlightColor');b24=new Shader(q20,p22['wfm-vertex.es2'],p22['wfm-fragment.es2']);b24.registerVertexAttrib('vertexPosition',q20.FLOAT,2);b24.registerVertexAttrib('textureCoord',q20.FLOAT,2);b24.setSampler('uWireframe',0);b24.setUniform2f('uViewportSize',r20,s20);b24.vertices=y22([[-1,-1],[1,-1],[1,1],[1,1],[-1,1],[-1,-1]],2);b24.texCoords=y22([[0,0],[1,0],[1,1],[1,1],[0,1],[0,0]],2);c24=a24;d24=p22['loadingtexture.png'];return true;});function l24(m24,n24,o24){h24.reset();h24.perspective(30, +r20/  +s20,n24,o24);h24.push();h24.invert();h24.swap();}z23=g23(true);l24(30,1,50);g24.translate(0,0,-10);this.time=0;this.running=false;this.parameters={};this.frameCount=0;this.start=function(){if(p23.running)return;p23.running=true;if(!e24)l23();};this.stop=function(){p23.running=false;};this.renderAt=function(x22){k24.then(function(){z20(x22);},j23);};this.render=function(){this.renderAt(this.time);};this.resize=function(w,h){r20=w;s20=h;l24(30,1,50);b24.setUniform2f('uViewportSize',r20,s20);z23=g23(true);q20.viewport(0,0,r20,s20);i23();};this.addNode=function(w22,parent){if(typeof parent!='undefined')(parent.children=parent.children||[]).push(w22); else s23.push(w22);w22.parent=parent;d22(w22);i23();};this.removeNode=function(w22){var m28=s23;if(w22.parent)m28=w22.parent.children;var n28=m28.indexOf(w22);if(n28>=0){m28.splice(n28,1);f22(w22,true);}i23();};this.bindParameter=function(name,fn){this.parameters[name]=fn;};this.setCameraTransform=function(m){g24.reset();g24.load(m);g24.invert();i23();};this.setTexture=function(w22,c22){this.resources.texture(c22).then(function(tex){if(w22.__renderData)w22.__renderData.mesh.texture=tex;});};this.getLocalTransform=function(w22){var o28=new MatrixStack();var p28=s21(w22);if(p28.transform)p28.transform(o28);return o28;};this.getTransform=function(w22){var q28;if(w22.parent)q28=this.getTransform(w22.parent); else q28=new MatrixStack();var r28=s21(w22);if(r28.transform)r28.transform(q28);return q28;};this.onerror=function(err){};this.onrepaintrequired=function(){};this.onbeforerendernode=null;this.onafterrendernode=null;}function u20(v20,w20){return new Promise(function(resolve,reject){try{var s28=v20.getContext('webgl')||v20.getContext('experimental-webgl');if(!s28)return reject('no webgl');var t28;if(w20 instanceof Resources)t28=w20; else t28=new Resources(w20);t28.image.set("loadingtexture.png",(function(){var u28=new Image();u28.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAIAAAB7GkOtAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wwTDwc2I0dVSQAABfxJREFUeNrt18ENAzEQA7FT+u9ZqSIItEdWYMuPgdP2WZZk+vz2t7/97f8vnweAVxIAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAEwAYAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAPxS1i/QdvsBEvvb3/729wMAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAQAAAEAAABAAAAQBAAAC4IW23L5BMn9/+9re//f0AABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAEAATAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgAgAAAIAAACAIAAACAAAJyR9Qu03X6AxP72t7/9/QAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAEAAABAAAAQBAAAAQAABuSNvtCyTT57e//e1vfz8AAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABABAAEwAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAIAAACAIAAACAAAAgAAGdk/QJttx8gsb/97W9/PwAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAABAAAAQBAAAAQAAAEAIAb0nb7Asn0+e1vf/vb3w8AAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAAATABAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAACAIAAACAAAAgAAAIAwBlZv0Db7QdI7G9/+9vfDwAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAABAAAAQBAAAAQAAAEAAABAEAAABAAAAQAAAEAQAAAEAAAAQBAAAAQAAAEAAABAOCGL4MkY+1A+o9iAAAAAElFTkSuQmCC";return u28;})());t28.file.set("std-vertex.es2",atob("cHJlY2lzaW9uIGhpZ2hwIGZsb2F0Ow0KDQphdHRyaWJ1dGUgdmVjMyBhVmVydGV4UG9zaXRpb247DQphdHRyaWJ1dGUgdmVjMyBhVmVydGV4Tm9ybWFsOw0KYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDsNCmF0dHJpYnV0ZSB2ZWMzIGFVVmVjdG9yOw0KYXR0cmlidXRlIHZlYzMgYVZWZWN0b3I7DQoNCnVuaWZvcm0gbWF0NCB1TW9kZWxNYXRyaXg7DQp1bmlmb3JtIG1hdDQgdUNhbWVyYU1hdHJpeDsNCnVuaWZvcm0gbWF0NCB1Vmlld3BvcnRNYXRyaXg7DQp1bmlmb3JtIG1hdDQgdVZpZXdwb3J0TWF0cml4SW52ZXJzZTsNCnVuaWZvcm0gYm9vbCB1V2lyZWZyYW1lOw0KDQp2YXJ5aW5nIGxvd3AgdmVjNCB2Q29sb3I7DQp2YXJ5aW5nIGhpZ2hwIHZlYzIgdlRleHR1cmVDb29yZDsNCnZhcnlpbmcgaGlnaHAgZmxvYXQgdk5vcm1hbGl6ZWREZXB0aDsNCnZhcnlpbmcgaGlnaHAgdmVjNCB2UG9zaXRpb247DQp2YXJ5aW5nIGhpZ2hwIHZlYzMgdk1vZGVsU3BhY2VQb3NpdGlvbjsNCnZhcnlpbmcgaGlnaHAgdmVjMyB2Q2FtU3BhY2VQb3NpdGlvbjsNCnZhcnlpbmcgaGlnaHAgdmVjMyB2Tm9ybWFsOw0KdmFyeWluZyBoaWdocCB2ZWMzIHZVVmVjdG9yOw0KdmFyeWluZyBoaWdocCB2ZWMzIHZWVmVjdG9yOw0KDQp2b2lkIG1haW4odm9pZCkgew0KICAgIHZlYzQgbW9kZWxTcGFjZSA9IHVNb2RlbE1hdHJpeCAqIHZlYzQoYVZlcnRleFBvc2l0aW9uLCAxLjApOw0KICAgIHZlYzQgY2FtZXJhU3BhY2UgPSB1Q2FtZXJhTWF0cml4ICogbW9kZWxTcGFjZTsNCiAgICB2ZWM0IGNsaXBTcGFjZSA9IHVWaWV3cG9ydE1hdHJpeCAqIGNhbWVyYVNwYWNlOw0KICAgIGdsX1Bvc2l0aW9uID0gY2xpcFNwYWNlOw0KICAgIHZQb3NpdGlvbiA9IGNsaXBTcGFjZTsNCiAgICB2Q2FtU3BhY2VQb3NpdGlvbiA9IGNhbWVyYVNwYWNlLnh5eiAvIGNhbWVyYVNwYWNlLnc7DQogICAgdk1vZGVsU3BhY2VQb3NpdGlvbiA9IG1vZGVsU3BhY2UueHl6IC8gbW9kZWxTcGFjZS53Ow0KICAgIC8vIEFjdHVhbGx5IHRoZSBjYWxjdWxhdGlvbiBiZWxvdyBpcyBub3QgY29ycmVjdCwgc2VlIHRoZSBkaXNjdXNzaW9uIGF0DQogICAgLy8gICBodHRwOi8vd3d3LmxpZ2h0aG91c2UzZC5jb20vdHV0b3JpYWxzL2dsc2wtMTItdHV0b3JpYWwvdGhlLW5vcm1hbC1tYXRyaXgvDQogICAgLy8gQWxzbywgaXJyaXRhdGluZ2x5LCBXZWJHTCAocmVhZCBHTCBFUykgZG9lc24ndCBzdXBwb3J0IHRoZSBpbnZlcnNlKCkgZnVuY3Rpb24uICBBbmQgY2FsY3VsYXRpbmcNCiAgICAvLyB0aGUgaW52ZXJzZSBpbiBKYXZhc2NyaXB0IGZvciBlYWNoIG1lc2ggYXQgZXZlcnkgZnJhbWUgaXMgbGlrZWx5IHRvIGJlIHNsb3cuICBTbyBJJ20gc3RpY2tpbmcgd2l0aA0KICAgIC8vIHRoaXMgdW50aWwgSSBjYW4gaW1wbGVtZW50IGFuIGludmVyc2UgZnVuY3Rpb24gaW4gR0xTTC4gIEhvcGVmdWxseSB0aGUgR1BVIGNvbXBpbGVyIHdpbGwgYmUgZ29vZA0KICAgIC8vIGVub3VnaCB0byBvcHRpbWl6ZSB0aGlzIG91dCBvZiB0aGUgdmVydGV4IHBpcGVsaW5lLg0KICAgIHZlYzQgbm9ybWFsID0gdU1vZGVsTWF0cml4ICogdmVjNChhVmVydGV4Tm9ybWFsLCAwLjApOw0KICAgIHZOb3JtYWwgPSBub3JtYWwueHl6Ow0KICAgIHZlYzQgdVZlYyA9IHVNb2RlbE1hdHJpeCAqIHZlYzQoYVVWZWN0b3IsIDAuMCk7DQogICAgdlVWZWN0b3IgPSB1VmVjLnh5ejsNCiAgICB2ZWM0IHZWZWMgPSB1TW9kZWxNYXRyaXggKiB2ZWM0KGFWVmVjdG9yLCAwLjApOw0KICAgIHZWVmVjdG9yID0gdlZlYy54eXo7DQogICAgaWYgKHVXaXJlZnJhbWUpIHsNCiAgICAgICAgdk5vcm1hbGl6ZWREZXB0aCA9IGNsaXBTcGFjZS56IC8gY2xpcFNwYWNlLnc7DQogICAgICAgIHZlYzQgYyA9IHVDYW1lcmFNYXRyaXggKiB1TW9kZWxNYXRyaXggKiB2ZWM0KGFWZXJ0ZXhOb3JtYWwsIDAuMCk7DQogICAgICAgIHZlYzMgY2FtZXJhTm9ybWFsID0gbm9ybWFsaXplKHZlYzMoYy54LCBjLnksIGMueikpOw0KICAgICAgICB2Q29sb3IgPSB2ZWM0KDAuNSpjYW1lcmFOb3JtYWwueHl6K3ZlYzMoMC41LDAuNSwwLjUpLCAxLjApOw0KICAgIH0NCiAgICB2VGV4dHVyZUNvb3JkID0gYVRleHR1cmVDb29yZDsNCn0="));t28.file.set("std-fragment.es2",atob("cHJlY2lzaW9uIGhpZ2hwIGZsb2F0Ow0KDQpjb25zdCBpbnQgTUFYX0xJR0hUUyA9IDIwOw0KDQpzdHJ1Y3QgQ29tcGxleCB7DQogICAgZmxvYXQgUmU7DQogICAgZmxvYXQgSW07DQp9Ow0KDQp1bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTsNCnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHVOb3JtYWxNYXA7DQp1bmlmb3JtIGJvb2wgdU5vcm1hbE1hcHBpbmc7DQp1bmlmb3JtIGJvb2wgdVdpcmVmcmFtZTsNCnVuaWZvcm0gYm9vbCB1UmVuZGVyRWRnZXM7DQp1bmlmb3JtIG1hdDQgdVZpZXdwb3J0TWF0cml4Ow0KdW5pZm9ybSBtYXQ0IHVDYW1lcmFNYXRyaXhJbnZlcnNlOw0KdW5pZm9ybSBpbnQgdU51bWJlck9mTGlnaHRzOw0KdW5pZm9ybSB2ZWMzIHVMaWdodFBvc2l0aW9uc1tNQVhfTElHSFRTXTsNCnVuaWZvcm0gdmVjMyB1TGlnaHRDb2xvcnNbTUFYX0xJR0hUU107DQp1bmlmb3JtIENvbXBsZXggdVJlZnJhY3RpdmVJbmRleDsNCnVuaWZvcm0gZmxvYXQgdUFtYmllbnRSZWZyYWN0aXZlSW5kZXg7DQp1bmlmb3JtIHZlYzMgdUFtYmllbnRMaWdodDsNCnVuaWZvcm0gdmVjNCB1SGlnaGxpZ2h0Q29sb3I7DQp1bmlmb3JtIGZsb2F0IHVHbG9zczsNCg0KdmFyeWluZyBsb3dwIHZlYzQgdkNvbG9yOw0KdmFyeWluZyBoaWdocCB2ZWMyIHZUZXh0dXJlQ29vcmQ7DQp2YXJ5aW5nIGhpZ2hwIGZsb2F0IHZOb3JtYWxpemVkRGVwdGg7DQp2YXJ5aW5nIGhpZ2hwIHZlYzQgdlBvc2l0aW9uOw0KdmFyeWluZyBoaWdocCB2ZWMzIHZNb2RlbFNwYWNlUG9zaXRpb247DQp2YXJ5aW5nIGhpZ2hwIHZlYzMgdkNhbVNwYWNlUG9zaXRpb247DQp2YXJ5aW5nIGhpZ2hwIHZlYzMgdk5vcm1hbDsNCnZhcnlpbmcgaGlnaHAgdmVjMyB2VVZlY3RvcjsNCnZhcnlpbmcgaGlnaHAgdmVjMyB2VlZlY3RvcjsNCg0KZmxvYXQgbW9kaWZpZWRCZXNzZWxfMChmbG9hdCB4KSB7DQogICAgZmxvYXQgYXggPSBhYnMoeCk7DQogICAgZmxvYXQgeTsNCg0KICAgaWYgKGF4IDwgMy43NSkgew0KICAgICAgeSA9IHgvMy43NTsNCiAgICAgIHkgPSB5Knk7DQogICAgICByZXR1cm4gMS4wICsgeSooMy41MTU2MjI5ICsgeSooMy4wODk5NDI0ICsgeSooMS4yMDY3NDkyICsgeSooMC4yNjU5NzMyICsgeSooMC4zNjA3NjhlLTEgKyB5KjAuNDU4MTNlLTIpKSkpKTsNCiAgIH0gZWxzZSB7DQogICAgICB5ID0gMy43NSAvIGF4Ow0KICAgICAgcmV0dXJuIChleHAoYXgpL3NxcnQoYXgpKSAqICgwLjM5ODk0MjI4ICsgeSooMC4xMzI4NTkyZS0xICsgeSooMC4yMjUzMTllLTIgKyB5KigtMC4xNTc1NjVlLTIgKyB5KigwLjkxNjI4MWUtMg0KICAgICAgICAgKyB5KigtMC4yMDU3NzA2ZS0xICsgeSooMC4yNjM1NTM3ZS0xICsgeSooLTAuMTY0NzYzM2UtMSArIHkqMC4zOTIzNzdlLTIpKSkpKSkpKTsNCiAgIH0NCn0NCg0KdmVjMyB3bm9ybSh2ZWM0IHgpIHsNCiAgICByZXR1cm4geC54eXogLyB4Lnc7DQp9DQoNCnZvaWQgbWFpbih2b2lkKSB7DQogICAgaWYgKCFnbF9Gcm9udEZhY2luZykNCiAgICAgICAgZGlzY2FyZDsNCiAgICBpZiAodVJlbmRlckVkZ2VzKSB7DQogICAgICAgIGZsb2F0IHogPSBzcXJ0KHZQb3NpdGlvbi56IC8gMi4wICsgMC41KTsNCiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh6LCB6LCB6LCAxLjApOw0KICAgIH0gZWxzZSBpZiAodVdpcmVmcmFtZSkgew0KICAgICAgICAvLyB0cnkgdG8gZmxhdHRlbiB0aGUgZGVwdGggb3V0IGEgYml0IHNvIGl0IHJlcHJlc2VudHMgYmV0dGVyIGluIGxpbWl0ZWQgYml0cw0KICAgICAgICBmbG9hdCBkZXB0aFJlcCA9IGxvZyh2Tm9ybWFsaXplZERlcHRoICogKGV4cCgxLjApIC0gMS4wKSArIDEuMCk7DQogICAgICAgIGRlcHRoUmVwID0gbG9nKGRlcHRoUmVwICogKGV4cCgxLjApIC0gMS4wKSArIDEuMCk7DQogICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQodkNvbG9yLnJnYiwgZGVwdGhSZXApOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHZlYzQgdGV4dHVyZUNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2ZWMyKHZUZXh0dXJlQ29vcmQucywgdlRleHR1cmVDb29yZC50KSk7DQogICAgICAgIHZlYzQgZnJhZ0NvbG9yOw0KICAgICAgICBpZiAodU51bWJlck9mTGlnaHRzID4gMCkgew0KICAgICAgICAgICAgdmVjMyBjYW1lcmFQb3NpdGlvbiA9IHdub3JtKHVDYW1lcmFNYXRyaXhJbnZlcnNlICogdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApKTsNCiAgICAgICAgICAgIHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKHZOb3JtYWwpOw0KICAgICAgICAgICAgaWYgKHVOb3JtYWxNYXBwaW5nKSB7DQogICAgICAgICAgICAgICAgbG93cCB2ZWM0IGRpc3BsYWNlbWVudCA9IHRleHR1cmUyRCh1Tm9ybWFsTWFwLCB2ZWMyKHZUZXh0dXJlQ29vcmQucywgdlRleHR1cmVDb29yZC50KSk7DQogICAgICAgICAgICAgICAgbm9ybWFsID0gbm9ybWFsaXplKA0KICAgICAgICAgICAgICAgICAgICAyLjAqKGRpc3BsYWNlbWVudC5yIC0gMC41KSpub3JtYWxpemUodlVWZWN0b3IpDQogICAgICAgICAgICAgICAgICArIDIuMCooZGlzcGxhY2VtZW50LmcgLSAwLjUpKm5vcm1hbGl6ZSh2VlZlY3RvcikNCiAgICAgICAgICAgICAgICAgICsgMi4wKihkaXNwbGFjZW1lbnQuYiAtIDAuNSkqbm9ybWFsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZlYzMgdG90YWxMaWdodCA9IHZlYzMoMCwgMCwgMCk7DQogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE1BWF9MSUdIVFM7ICsraSkgew0KICAgICAgICAgICAgICAgIGlmIChpID49IHVOdW1iZXJPZkxpZ2h0cykNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgdmVjMyBsaWdodENvbG9yID0gdUxpZ2h0Q29sb3JzW2ldOw0KICAgICAgICAgICAgICAgIHZlYzMgbGlnaHRQb3NpdGlvbiA9IHVMaWdodFBvc2l0aW9uc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAobGlnaHRDb2xvci5yID09IDAuMCAmJiBsaWdodENvbG9yLmcgPT0gMC4wICYmIGxpZ2h0Q29sb3IuYiA9PSAwLjApDQogICAgICAgICAgICAgICAgICAgIGxpZ2h0Q29sb3IgPSB2ZWMzKDEuMCwxLjAsMS4wKTsNCiAgICAgICAgICAgICAgICB2ZWMzIGluY2lkZW50ID0gbm9ybWFsaXplKHZNb2RlbFNwYWNlUG9zaXRpb24gLSBsaWdodFBvc2l0aW9uKTsNCiAgICAgICAgICAgICAgICB2ZWMzIHJlZmxlY3RpdmUgPSByZWZsZWN0KGluY2lkZW50LCBub3JtYWwpOw0KICAgICAgICAgICAgICAgIGZsb2F0IG4xID0gdUFtYmllbnRSZWZyYWN0aXZlSW5kZXg7DQogICAgICAgICAgICAgICAgaWYgKG4xID09IDAuMCkNCiAgICAgICAgICAgICAgICAgICAgbjEgPSAxLjA7DQogICAgICAgICAgICAgICAgZmxvYXQgY3RpID0gLWRvdChub3JtYWwsIGluY2lkZW50KTsNCiAgICAgICAgICAgICAgICBpZiAoY3RpIDwgMC4wKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gdGhpcyBsaWdodCBpcyBiZWhpbmQgdGhpcyBmYWNlDQogICAgICAgICAgICAgICAgZmxvYXQgc3RpID0gc3FydCgxLjAgLSBjdGkqY3RpKTsNCiAgICAgICAgICAgICAgICBmbG9hdCBSOw0KICAgICAgICAgICAgICAgIFIgPSB1UmVmcmFjdGl2ZUluZGV4LlJlOw0KICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSByZWZsZWN0YW5jZSB1c2luZyB0aGUgRnJlc25lbCBlcXVhdGlvbnMNCiAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBhIHdheSB0byBkbyB0aGlzIGluIDggbXVscyBidXQgSSdtIHRvbyBsYXp5IDotKQ0KICAgICAgICAgICAgICAgIGlmICh1UmVmcmFjdGl2ZUluZGV4LkltID09IDAuMCkgeyAvLyBzaW1wbGUgY2FzZSBmb3Igbm9uLWNvbmR1Y3RvcnMNCiAgICAgICAgICAgICAgICAgICBmbG9hdCBuMiA9IHVSZWZyYWN0aXZlSW5kZXguUmU7DQogICAgICAgICAgICAgICAgICAgIGlmIChuMiA9PSAwLjApDQogICAgICAgICAgICAgICAgICAgICAgICBuMiA9IDEuNTsgLy8gZ29vZCBkZWZhdWx0IGZvciBwbGFzdGlja3kgc29saWRzDQogICAgICAgICAgICAgICAgICAgIGZsb2F0IHN0dCA9IG4xL24yKnN0aTsNCiAgICAgICAgICAgICAgICAgICAgZmxvYXQgY3R0ID0gc3FydCgxLjAgLSBzdHQqc3R0KTsNCiAgICAgICAgICAgICAgICAgICAgZmxvYXQgYSA9IG4xKmN0aSAtIG4yKmN0dDsNCiAgICAgICAgICAgICAgICAgICAgZmxvYXQgYiA9IG4xKmN0dCAtIG4yKmN0aTsNCiAgICAgICAgICAgICAgICAgICAgZmxvYXQgYyA9IG4xKmN0aSArIG4yKmN0dDsNCiAgICAgICAgICAgICAgICAgICAgUiA9IDAuNSooYSphICsgYipiKS8oYypjKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBSID0gMC4wOyAvLyBUT0RPDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIEZvciB0aGUgZ2xvc3MgKG9yIHJvdWdobmVzcyksIHdlIGFzc3VtZSBhIHZvbiBNaXNlcyBkaXN0cmlidXRpb24gb2YgZGVmbGVjdGlvbiBhbmdsZXMgZnJvbQ0KICAgICAgICAgICAgICAgIC8vIHRoZSBwcmluY2lwYWwgcmVmbGVjdGlvbiB2ZWN0b3IuICBUaGUgayBwYXJhbWV0ZXIgb2YgdGhlIGRpc3RyaWJ1dGlvbiBpcyBzdWNoIHRoYXQgaz0wIGltcGxpZXMNCiAgICAgICAgICAgICAgICAvLyBwZXJmZWN0bHkgZXZlbiBkaXN0cmlidXRpb24gKGVxdWl2YWxlbnQgdG8gYSBmdWxseS1kaWZmdXNlIHN1cmZhY2UpLCBhbmQgYXMgayAtPiDiiJ4sIHRoZSBkaXN0cmlidXRpb24NCiAgICAgICAgICAgICAgICAvLyB0ZW5kcyB0b3dhcmRzIHRoZSBEaXJhYyBkZWx0YSBmdW5jdGlvbiAoaS5lLiBhbiBpbmZpbml0ZSBzcGlrZSBhdCAwKS4gIFRoZSBpbnRlZ3JhbCB1bmRlciB0aGUNCiAgICAgICAgICAgICAgICAvLyBQREYgaXMgb2YgY291cnNlIDEsIHNvIGVuZXJneSBpcyBjb25zZXJ2ZWQuICBXZSBjYW4gaWRlbnRpZnkgdUdsb3NzID0gMSA9PiBrID0g4oieIGFuZA0KICAgICAgICAgICAgICAgIC8vIHVHbG9zcyA9IDAgPT4gayA9IDANCiAgICAgICAgICAgICAgICBmbG9hdCBTID0gMC4wOw0KICAgICAgICAgICAgICAgIHZlYzMgY2FtZXJhVmVjID0gbm9ybWFsaXplKGNhbWVyYVBvc2l0aW9uIC0gdk1vZGVsU3BhY2VQb3NpdGlvbik7DQogICAgICAgICAgICAgICAgZmxvYXQgY29zX3QgPSBkb3QoY2FtZXJhVmVjLCByZWZsZWN0aXZlKTsNCiAgICAgICAgICAgICAgICBmbG9hdCBrID0gMi43MTgvKDEuMC11R2xvc3MpLTIuNzE4Ow0KICAgICAgICAgICAgICAgIGlmICh1R2xvc3MgPiAwLjk3KSAgLy8gaW4gdGhlb3J5LCB3aGF0IGhhcHBlbnMgaGVyZSBpcyBhbGwgdGhlIGxpZ2h0IGdvZXMgYWxvbmcgdGhlIHJlZmxlY3RpdmUgdmVjdG9yLg0KICAgICAgICAgICAgICAgICAgICBrID0gODcuODgyOyAgICAgLy8gaW4gcHJhY3RpY2UsIHRoaXMganVzdCBvdmVyZmxvd3MgYWxsIHRoZSBjYWxjdWxhdGlvbnMNCiAgICAgICAgICAgICAgICBmbG9hdCBJID0gbW9kaWZpZWRCZXNzZWxfMChrKTsNCiAgICAgICAgICAgICAgICBTID0gUiAqIGV4cChrICogY29zX3QpIC8gKDYuMjgzMTg1MyAqIEkpOw0KICAgICAgICAgICAgICAgIC8vIFNvIHRoZSBlbmVyZ3kgZnJvbSB0aGUgaW5jb21pbmcgbGlnaHQgaXMgZGlzdHJpYnV0ZWQgYXMgZm9sbG93czoNCiAgICAgICAgICAgICAgICAvLyAgIFIgLSBnZXRzIHJlZmxlY3RlZCBvZmYgc29tZXdoZXJlIGVsc2UNCiAgICAgICAgICAgICAgICAvLyAgIFMgLSBnZXRzIHJlZmxlY3RlZCBpbnRvIHRoZSBjYW1lcmENCiAgICAgICAgICAgICAgICAvLyAgIEQgLSBpcyBlbWl0dGVkIHVuaWZvcm1seSBpbiBhbGwgZGlyZWN0aW9ucw0KICAgICAgICAgICAgICAgIC8vIFRoZXJlZm9yZSB3aGF0IHJlYWNoZXMgdGhlIGNhbWVyYSBpcyBTICsgRC9waQ0KICAgICAgICAgICAgICAgIC8vIHJlbGF0aXZlIGVuZXJnaWVzIG9mIGNvbG9ycyB1c2VkIGhlcmU6IDAuMzByICsgMC41OWcgKyAwLjExYiBiYXNlZCBvbiBZVVYgaW50ZW5zaXR5IG1vZGVsDQogICAgICAgICAgICAgICAgLy8gbWF4aW11bSB0b3RhbCBlbmVyZ3k6IDEvMC4zICsgMS8wLjU5ICsgMS8wLjExID0gMTQuMTE5MTU3Njc4NDc5NzEyMzc4MDE3NDYyNzYzMjI1DQogICAgICAgICAgICAgICAgZmxvYXQgZW5lcmd5SW5jb21pbmcgPQ0KICAgICAgICAgICAgICAgICAgICAobGlnaHRDb2xvci5yIC8gMC4zICsgbGlnaHRDb2xvci5nIC8gMC41OSArIGxpZ2h0Q29sb3IuYiAvIDAuMTEpIC8gMTQuMTEyOw0KICAgICAgICAgICAgICAgIGZsb2F0IGQgPSAoMS4wIC0gUikgKiBlbmVyZ3lJbmNvbWluZzsNCiAgICAgICAgICAgICAgICBmbG9hdCBzID0gUyAqIGVuZXJneUluY29taW5nOw0KICAgICAgICAgICAgICAgIHRvdGFsTGlnaHQgKz0gZCAqIHRleHR1cmVDb2xvci5yZ2IgKiBsaWdodENvbG9yLnJnYiArIHMgKiBsaWdodENvbG9yLnJnYjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRvdGFsTGlnaHQgKz0gdUFtYmllbnRMaWdodC5yZ2IgKiB0ZXh0dXJlQ29sb3IucmdiOw0KICAgICAgICAgICAgZnJhZ0NvbG9yID0gdmVjNCgoMS4wIC0gdUhpZ2hsaWdodENvbG9yLmEpICogdG90YWxMaWdodC5yZ2IgKyB1SGlnaGxpZ2h0Q29sb3IuYSAqIHVIaWdobGlnaHRDb2xvci5yZ2IsIDEuMCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBmcmFnQ29sb3IgPSB0ZXh0dXJlQ29sb3I7DQogICAgICAgIH0NCiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gZnJhZ0NvbG9yOw0KICAgIH0NCn0="));t28.file.set("wfm-vertex.es2",atob("YXR0cmlidXRlIHZlYzIgYVZlcnRleFBvc2l0aW9uOw0KYXR0cmlidXRlIHZlYzIgYVRleHR1cmVDb29yZDsNCg0KdmFyeWluZyBoaWdocCB2ZWMyIHZUZXh0dXJlQ29vcmQ7DQoNCnZvaWQgbWFpbih2b2lkKSB7DQogICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFWZXJ0ZXhQb3NpdGlvbi54LCBhVmVydGV4UG9zaXRpb24ueSwgMC4wLCAxLjApOw0KICAgIHZUZXh0dXJlQ29vcmQgPSBhVGV4dHVyZUNvb3JkOw0KfQ=="));t28.file.set("wfm-fragment.es2",atob("I2V4dGVuc2lvbiBHTF9FWFRfZnJhZ19kZXB0aCA6IGVuYWJsZQ0KcHJlY2lzaW9uIGhpZ2hwIGZsb2F0Ow0KDQp1bmlmb3JtIHNhbXBsZXIyRCB1V2lyZWZyYW1lOw0KdW5pZm9ybSB2ZWMyIHVWaWV3cG9ydFNpemU7DQp1bmlmb3JtIG1hdDQgdVZpZXdwb3J0TWF0cml4Ow0KdW5pZm9ybSBtYXQ0IHVWaWV3cG9ydE1hdHJpeEludmVyc2U7DQoNCnZhcnlpbmcgdmVjMiB2VGV4dHVyZUNvb3JkOw0KDQp2b2lkIG1haW4odm9pZCkgew0KICAgIHZlYzQgcGl4ID0gdGV4dHVyZTJEKHVXaXJlZnJhbWUsIHZUZXh0dXJlQ29vcmQpOw0KICAgIGlmIChwaXguYSA9PSAwLjApIHsNCiAgICAgICAgZGlzY2FyZDsNCiAgICB9IGVsc2Ugew0KICAgICAgICB2ZWMyIG9uZVBpeGVsID0gdmVjMigxLjAsIDEuMCkgLyB1Vmlld3BvcnRTaXplOw0KICAgICAgICB2ZWM0IGVkZ2UgPSAoOC4qcGl4IC0NCiAgICAgICAgICAgIHRleHR1cmUyRCh1V2lyZWZyYW1lLCB2VGV4dHVyZUNvb3JkICsgdmVjMigtb25lUGl4ZWwueCwgLW9uZVBpeGVsLnkpKSAtDQogICAgICAgICAgICB0ZXh0dXJlMkQodVdpcmVmcmFtZSwgdlRleHR1cmVDb29yZCArIHZlYzIoLW9uZVBpeGVsLngsIDApKSAtDQogICAgICAgICAgICB0ZXh0dXJlMkQodVdpcmVmcmFtZSwgdlRleHR1cmVDb29yZCArIHZlYzIoLW9uZVBpeGVsLngsIG9uZVBpeGVsLnkpKSAtDQogICAgICAgICAgICB0ZXh0dXJlMkQodVdpcmVmcmFtZSwgdlRleHR1cmVDb29yZCArIHZlYzIoMCwgLW9uZVBpeGVsLnkpKSAtDQogICAgICAgICAgICB0ZXh0dXJlMkQodVdpcmVmcmFtZSwgdlRleHR1cmVDb29yZCArIHZlYzIoMCwgb25lUGl4ZWwueSkpIC0NCiAgICAgICAgICAgIHRleHR1cmUyRCh1V2lyZWZyYW1lLCB2VGV4dHVyZUNvb3JkICsgdmVjMihvbmVQaXhlbC54LCAtb25lUGl4ZWwueSkpIC0NCiAgICAgICAgICAgIHRleHR1cmUyRCh1V2lyZWZyYW1lLCB2VGV4dHVyZUNvb3JkICsgdmVjMihvbmVQaXhlbC54LCAwKSkgLQ0KICAgICAgICAgICAgdGV4dHVyZTJEKHVXaXJlZnJhbWUsIHZUZXh0dXJlQ29vcmQgKyB2ZWMyKG9uZVBpeGVsLngsIG9uZVBpeGVsLnkpKSkvOC4gOw0KICAgICAgICBmbG9hdCBlZGdpbmVzcyA9IGVkZ2UuciplZGdlLnIgKyBlZGdlLmcqZWRnZS5nICsgZWRnZS5iKmVkZ2UuYjsNCiAgICAgICAgaWYgKGVkZ2luZXNzID4gMC4wMSkgew0KICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLDEsMSwxKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGZsb2F0IHkgPSAwLjErcGl4LmEtMC4yKihwaXguYi0wLjUpKihwaXguYi0wLjUpOw0KICAgICAgICAgICAgZmxvYXQgdSA9IDAuMDgqKHBpeC5yLTAuNSkqKHBpeC5yLTAuNSk7DQogICAgICAgICAgICBmbG9hdCB2ID0gMC4xMioocGl4LmctMC41KSoocGl4LmctMC41KTsNCiAgICAgICAgICAgIGdsX0ZyYWdDb2xvcj12ZWM0KHkseSt1LHkrdiwwLjUpOw0KICAgICAgICB9DQojaWZkZWYgR0xfRVhUX2ZyYWdfZGVwdGgNCiAgICAgICAgZmxvYXQgZGVwdGhSZXAgPSBwaXguYTsNCiAgICAgICAgZmxvYXQgbmRjX2RlcHRoID0gKGV4cChkZXB0aFJlcCkgLSAxLjApLyhleHAoMS4wKSAtIDEuMCk7DQogICAgICAgIG5kY19kZXB0aCA9IChleHAobmRjX2RlcHRoKSAtIDEuMCkvKGV4cCgxLjApIC0gMS4wKTsNCiAgICAgICAgZmxvYXQgZmFyID0gZ2xfRGVwdGhSYW5nZS5mYXI7DQogICAgICAgIGZsb2F0IG5lYXIgPSBnbF9EZXB0aFJhbmdlLm5lYXI7DQogICAgICAgIGdsX0ZyYWdEZXB0aEVYVCA9ICgoKGZhciAtIG5lYXIpICogbmRjX2RlcHRoKSArIG5lYXIgKyBmYXIpIC8gMi4wOw0KI2VuZGlmDQogICAgICAgIC8vZ2xfRnJhZ0NvbG9yID0gdmVjNChkdi56LCAwLDAsMSk7DQogICAgfQ0KfQ=="));t28.all({'loadingtexture.png':t28.image,'std-vertex.es2':t28.file,'std-fragment.es2':t28.file,'wfm-vertex.es2':t28.file,'wfm-fragment.es2':t28.file}).then(function(preloaded){try{var v28=new p20(s28,v20.width,v20.height,t28);v20.__renderjs=v28;resolve(v28);}catch(error){reject(error);}});}catch(error){reject(error);}});}return u20;})();renderjs.createRenderer=createRenderer;var Primitives=(function(){function w28(x28,y28){if(x28 instanceof Array){if(!(y28 instanceof Array))throw {error:'expecting array object'};return x28.concat(y28);}for(var k29 in y28){if(typeof x28[k29]!='object')x28[k29]=y28[k29]; else x28[k29]=w28(x28[k29],y28[k29]);}return x28;}var z28=0.525731112119133606;var a29=0.850650808352039932;var b29=[[-z28,0,a29],[z28,0,a29],[-z28,0,-a29],[z28,0,-a29],[0,a29,z28],[0,a29,-z28],[0,-a29,z28],[0,-a29,-z28],[a29,z28,0],[-a29,z28,0],[a29,-z28,0],[-a29,-z28,0]];var c29=[[0,1,4],[0,4,9],[9,4,5],[4,8,5],[4,1,8],[8,1,10],[8,10,3],[5,8,3],[5,3,2],[2,3,7],[7,3,10],[7,10,6],[7,6,11],[11,6,0],[0,6,1],[6,10,1],[9,11,0],[9,2,11],[9,5,2],[7,11,2]];var d29=Geometry.Maps;function e29(f29,g29,h29,i29){for(var l29=0;l29<f29.vertices.length;++l29){var m29=f29.vertices[l29];var n29=f29.normals[l29];var o29=f29.texCoords[l29];if(((((((g29[0]==m29[0]&&g29[1]==m29[1])&&g29[2]==m29[2])&&h29[0]==n29[0])&&h29[1]==n29[1])&&h29[2]==n29[2])&&i29[0]==o29[0])&&i29[1]==o29[1])return l29;}f29.vertices.push(g29);f29.normals.push(h29);f29.texCoords.push(i29);return l29;}var j29={cube:function(properties,options){var p29;options=options||{};if(options.projection=='square'){p29=[[0.333,0.667],[0.667,0.667],[0.667,0.333],[0.333,0.333],[0.000,0.667],[0.333,0.667],[0.333,0.333],[0.000,0.333],[0.667,0.667],[1.000,0.667],[1.000,0.333],[0.667,0.333],[0.333,0.333],[0.667,0.333],[0.667,0.000],[0.333,0.000],[0.333,1.000],[0.667,1.000],[0.667,0.667],[0.333,0.667],[0.000,0.333],[0.333,0.333],[0.333,0.000],[0.000,0.000]];} else {p29=[[0.50,0.75],[0.75,0.50],[0.50,0.25],[0.25,0.50],[0.25,1.00],[0.50,0.75],[0.25,0.50],[0.00,0.75],[0.75,0.50],[1.00,0.25],[0.75,0.00],[0.50,0.25],[0.25,0.50],[0.50,0.25],[0.25,0.00],[0.00,0.25],[0.75,1.00],[1.00,0.75],[0.75,0.50],[0.50,0.75],[1.00,1.25],[1.25,1.00],[1.00,0.75],[0.75,1.00]];}return w28({mesh:{vertices:[[-0.5,-0.5,0.5],[0.5,-0.5,0.5],[0.5,0.5,0.5],[-0.5,0.5,0.5],[-0.5,-0.5,-0.5],[-0.5,-0.5,0.5],[-0.5,0.5,0.5],[-0.5,0.5,-0.5],[0.5,-0.5,0.5],[0.5,-0.5,-0.5],[0.5,0.5,-0.5],[0.5,0.5,0.5],[-0.5,0.5,0.5],[0.5,0.5,0.5],[0.5,0.5,-0.5],[-0.5,0.5,-0.5],[-0.5,-0.5,-0.5],[0.5,-0.5,-0.5],[0.5,-0.5,0.5],[-0.5,-0.5,0.5],[0.5,-0.5,-0.5],[-0.5,-0.5,-0.5],[-0.5,0.5,-0.5],[0.5,0.5,-0.5]],texCoords:p29,texture:'loadingtexture.png',faces:[[0,1,2],[2,3,0],[4,5,6],[6,7,4],[8,9,10],[10,11,8],[12,13,14],[14,15,12],[16,17,18],[18,19,16],[20,21,22],[22,23,20]]}},properties);},sphere:function(properties,options){options=options||{};options.targetTriangles=options.targetTriangles||320;options.projection=options.projection||d29.Polar;if(typeof options.projection=='string'){switch(options.projection){case 'polar':options.projection=d29.Polar;break;case 'hammer':case 'hammerAitoff':options.projection=d29.HammerAitoff;break;case 'mercator':options.projection=d29.Mercator;break;}}function q29(u29,v29){var b30=u29[0]+v29[0];var c30=u29[1]+v29[1];var d30=u29[2]+v29[2];var e30=Math.sqrt((b30*b30+c30*c30)+d30*d30);return [b30/e30,c30/e30,d30/e30];}function t29(u29,v29,w29,x29){if(x29>=y29){var f30=options.projection.getTextureCoordinates(u29,v29,w29);var g30=e29(z29,u29,u29,f30[0]);var h30=e29(z29,v29,v29,f30[1]);var i30=e29(z29,w29,w29,f30[2]);z29.faces.push([g30,h30,i30]);} else {var j30=q29(u29,v29);var k30=q29(v29,w29);var l30=q29(w29,u29);t29(u29,j30,l30,x29+1);t29(v29,k30,j30,x29+1);t29(w29,l30,k30,x29+1);t29(j30,k30,l30,x29+1);}}var y29=Math.round(Math.log(options.targetTriangles/20)/Math.log(4))|0;var z29={vertices:[],normals:[],texCoords:[],faces:[],texture:'loadingtexture.png'};for(var a30=0;a30<c29.length;++a30){t29(b29[c29[a30][0]],b29[c29[a30][1]],b29[c29[a30][2]],0);}return w28({mesh:z29},properties);},disc:function(properties,options){var m30=m30||{};var n30=(m30.numTriangles||24)|0;var o30=[];var p30=[];var q30=[];var r30=[];o30.push([0,0,0]);q30.push([0,0,1]);r30.push([0.5,0.5]);for(var s30=0;s30<n30;++s30){var t30=Math.cos(((s30*2)*Math.PI)/n30);var u30=Math.sin(((s30*2)*Math.PI)/n30);o30.push([t30,u30,0]);q30.push([0,0,1]);r30.push([(t30+1)/2,1-(u30+1)/2]);if(s30>0)p30.push([0,s30,s30+1]);}p30.push([0,s30,1]);return w28({mesh:{vertices:o30,normals:q30,texCoords:r30,faces:p30,texture:'loadingtexture.png'}},properties);}};return j29;})();renderjs.Primitives=Primitives;})(typeof window !== "undefined" ? window : this);